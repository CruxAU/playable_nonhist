###########################
#NON HISTORICAL MODE MADE ACTUALLY PLAYABLE EVENTS
###########################

add_namespace = nonhist_ENG
add_namespace = nonhist_ROM
add_namespace = nonhist_POL
add_namespace = nonhist_CAN
add_namespace = nonhist_ITA
add_namespace = nonhist_CHI
add_namespace = nonhist_JAP
add_namespace = nonhist_GER
add_namespace = nonhist_TUR
add_namespace = nonhist_NOR
add_namespace = nonhist_AUS
add_namespace = nonhist_generic
add_namespace = nonhist_news

country_event = {
	id = nonhist_ENG.1
	title = nonhist_ENG.1.t	
	desc = nonhist_ENG.1.desc
	picture = GFX_report_event_communists_cheer				
	
	

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_cosmetic_tag = ENG_england
			set_global_flag = ENG_became_england
			division_template = {
				name = "Workers' Militias"
				is_locked = no
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }							
				}
				support = {
					
				}
			}
			release = SCO
			SCO = {
				set_politics = { ruling_party = communism elections_allowed = no }
				add_popularity = { ideology = communism popularity = 0.4 }
				transfer_state = 932
				division_template = {
					name = "Scottish Homeland Defence" 	
					is_locked = no
					regiments = {
						infantry = { x = 0 y = 0 }		
						infantry = { x = 0 y = 1 }		
						infantry = { x = 0 y = 2 }

						infantry = { x = 1 y = 0 }		
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }		
						
						infantry = { x = 2 y = 0 }		
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }	
					}
					support = {
						engineer = { x = 0 y = 0 }
						artillery = {x = 0 y = 1 }
					}
				}
				121 = {
					create_unit = {
						division = "name = \"Scottish Homeland Defence\" division_template = \"Scottish Homeland Defence\" start_experience_factor = 0.7 start_equipment_factor = 1 start_manpower_factor = 1"
						owner = SCO
						allow_spawning_on_enemy_provs = yes 
						count = 7 
					}
					create_unit = {
						division = "name = \"Workers' Militia\" division_template = \"Workers' Militias\" start_experience_factor = 0.1 start_equipment_factor = 0.7 start_manpower_factor = 0.8"
						owner = SCO
						allow_spawning_on_enemy_provs = yes 
						count = 8 
					}
				}
				
			}
			release = WLS
			WLS = {
				set_politics = { ruling_party = communism elections_allowed = no }
				add_popularity = { ideology = communism popularity = 0.4 }
				division_template = {
					name = "Welsh Homeland Defence" 	
					is_locked = no
					regiments = {
						infantry = { x = 0 y = 0 }		
						infantry = { x = 0 y = 1 }		
						infantry = { x = 0 y = 2 }

						infantry = { x = 1 y = 0 }		
						infantry = { x = 1 y = 1 }
						infantry = { x = 1 y = 2 }		
						
						infantry = { x = 2 y = 0 }		
						infantry = { x = 2 y = 1 }
						infantry = { x = 2 y = 2 }	
					}
					support = {
						engineer = { x = 0 y = 0 }
						artillery = {x = 0 y = 1 }
					}
				}
				122 = {
					create_unit = {
						division = "name = \"Welsh Homeland Defence\" division_template = \"Welsh Homeland Defence\" start_experience_factor = 0.7 start_equipment_factor = 1 start_manpower_factor = 1"
						owner = WLS
						allow_spawning_on_enemy_provs = yes 
						count = 4 
					}
					create_unit = {
						division = "name = \"Workers' Militia\" division_template = \"Workers' Militias\" start_experience_factor = 0.1 start_equipment_factor = 0.7 start_manpower_factor = 0.8"
						owner = WLS
						allow_spawning_on_enemy_provs = yes 
						count = 4 
					}
				}
			}
			if = {
				limit = {
					ROOT = {
						controls_state = 119
					}
					IRE = {
						has_government = communism
					}
				}
				IRE = {
					transfer_state = 119
				}
			}
			else_if = {
				limit = {
					ROOT = {
						controls_state = 119
					}
				}
				release = NIR
				NIR = {
					set_politics = { ruling_party = communism elections_allowed = no }
					add_popularity = { ideology = communism popularity = 0.4 }
					division_template = {
						name = "IRA Division" 	
						is_locked = no
						regiments = {
							infantry = { x = 0 y = 0 }		
							infantry = { x = 0 y = 1 }		
							infantry = { x = 0 y = 2 }

							infantry = { x = 1 y = 0 }		
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }		
							
							infantry = { x = 2 y = 0 }		
							infantry = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }	
						}
						support = {
							engineer = { x = 0 y = 0 }
							artillery = {x = 0 y = 1 }
						}
					}
					119 = {
						create_unit = {
							division = "name = \"IRA Division\" division_template = \"IRA Division\" start_experience_factor = 1 start_equipment_factor = 1 start_manpower_factor = 1"
							owner = NIR
							allow_spawning_on_enemy_provs = yes 
							count = 3 
						}
						create_unit = {
							division = "name = \"Workers' Militia\" division_template = \"Workers' Militias\" start_experience_factor = 0.1 start_equipment_factor = 0.7 start_manpower_factor = 0.8"
							owner = NIR
							allow_spawning_on_enemy_provs = yes 
							count = 3 
						}
					}
				}
			
			}
		}
	}

	option = { 
		name = nonhist_ENG.1.a
		effect_tooltip = {
			release = SCO
			release = WLS
			release = NIR
		}
	}

}


country_event = { #event for england, soviets propose peace after poland caps
	id = nonhist_ENG.2
	title = nonhist_ENG.2.t	
	desc = nonhist_ENG.2.desc
	picture = GFX_report_event_german_polish_border
	is_triggered_only = yes	
	
	option = {  #agree
		name = nonhist_ENG.2.a
		ai_chance = {
			base = 5
		}
		SOV = {
			country_event = { id = nonhist_ENG.3 days = 3 }
		}
	}
	option = { #refuse
		name = nonhist_ENG.2.b
		ai_chance = {
			base = 0
		}
		#no effect
	}
}

country_event = { #event for soviets, england propose peace after poland caps
	id = nonhist_ENG.3
	title = nonhist_ENG.3.t	
	desc = nonhist_ENG.3.desc
	picture = GFX_report_event_german_polish_border
	is_triggered_only = yes	
	
	option = {  #agree
		name = nonhist_ENG.3.a
		ai_chance = {
			base = 5
		}

		every_country = {
			limit = {
				is_in_faction_with = FROM
			}
			white_peace = ROOT
		}
		every_country = {
			limit = {
				is_in_faction_with = ROOT
			}
			white_peace = FROM
		}
		if = {
			limit = {
				OR = {
					casualties_inflicted_by = {
						opponent = POL
						thousands < 300
					}
					casualties_inflicted_by = {
						opponent = ENG
						thousands < 100
					}
				}
			}
			clr_country_flag = SOV_third_five_year_plan_locked_flag 
		}
		GER = {
			country_event = germany.14
		}
		country_event = soviet.60
		
	}
	option = { #refuse
		name = nonhist_ENG.3.b
		ai_chance = {
			base = 0
		}
		#no effect
	}
}


################################################################################
################################################################################
################################# ROMANIA #######################################
################################################################################
################################################################################


country_event = { #event for transnistria controller, if the controller is in the same faction as ROM, ususally GER or SOV
	id = nonhist_ROM.1
	title = nonhist_ROM.1.t	
	desc = nonhist_ROM.1.desc
	picture = GFX_report_event_military_planning
	is_triggered_only = yes	
	
	option = {  #agree
		name = nonhist_ROM.1.a
		ai_chance = {
			base = 5
			modifier = {
				factor = 0.5
				834 = { is_claimed_by = ROOT }
			}
		}
		FROM = {
			country_event = { id = nonhist_ROM.2 days = 3 }
			custom_effect_tooltip = ROM_cannot_change_sides_tt
			effect_tooltip = {
				FROM = { 
					set_state_controller = 834 
					if = {
						limit = {
							ROOT = {
								controls_state = 192
							}
						}
						set_state_controller = 192 
					}
				}
			}
		}
	}
	option = { #refuse
		name = nonhist_ROM.1.b
		ai_chance = {
			base = 1
			modifier = {
				add = 10
				834 = { is_claimed_by = ROOT }
			}
			modifier = {
				add = 5
				any_state = {
					is_claimed_by = ROOT
					is_controlled_by = FROM
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		FROM = {
			country_event = { id = nonhist_ROM.3 days = 3 }
		}
		custom_effect_tooltip = ROM_might_change_sides_tt
	}
}

country_event = { #event for romania, transnistria controller agrees
	id = nonhist_ROM.2
	title = nonhist_ROM.2.t	
	desc = nonhist_ROM.2.desc
	picture = GFX_report_event_military_planning
	is_triggered_only = yes	
	
	option = {  #agree
		name = excellent
		if = {
			limit = {
				FROM = {
					owns_state = 834
				}
			}
			ROOT = {
				transfer_state = 834
			}
		}
		else = {
			ROOT = {
				set_state_controller = 834
			}
		}
		if = {
			limit = {
				FROM = {
					owns_state = 192
				}
			}
			ROOT = {
				transfer_state = 192
			}
		}
		else = {
			ROOT = {
				set_state_controller = 192
				add_state_claim = 192
			}
		}
		hidden_effect = {
			set_country_flag = ROM_cannot_change_sides_flag
		}
	}
}

country_event = { #event for romania, transnistria controller refuses
	id = nonhist_ROM.3
	title = nonhist_ROM.3.t	
	desc = nonhist_ROM.3.desc
	picture = GFX_report_event_military_planning
	is_triggered_only = yes	
	
	option = {  #swap sides
		name = nonhist_ROM.3.a
		ai_chance = {
			base = 3
			modifier = { #just for the focus, the AI does not change sides unless situation is worse than this
				NOT = {
					has_game_rule = {
						rule = ROM_ai_loyalty
						option = LOYAL
					}
				}
				is_in_faction = yes
				is_faction_leader = no
				any_enemy_country = {
					is_faction_leader = yes
					OR = {
						controls_state = 107 #belgrade
						controls_state = 48 #sofia
						controls_state = 43 #budapest
						controls_state = 202 #kiev
					}
				}
				add = 10
			}
			modifier = {
				factor = 0
				has_game_rule = {
					rule = ROM_ai_loyalty
					option = LOYAL
				}
			}
		}
		hidden_effect = {
			random_country = {
				limit = {
					is_in_faction_with = ROOT
					is_faction_leader = yes
				}
				#save current faction leader for use in the event
				save_global_event_target_as = romania_former_ally_target
			}
			random_other_country = {
				limit = {
					is_faction_leader = yes
					has_war_with = ROOT
				}
				save_event_target_as = romania_new_ally_target
			}
		}
		event_target:romania_new_ally_target = {
			country_event = { id = DOD_romania.16 }
		}
		hidden_effect = {
			set_country_flag = romania_has_flipped_sides
		}
		
	}

	option = { #stay anyway
		name = nonhist_ROM.3.b
		ai_chance = {
			base = 1
		}
		add_stability = -0.1
	}
}



################################################################################
################################################################################
################################# POLAND #######################################
################################################################################
################################################################################

country_event = {
	id = nonhist_POL.1
	title = nonhist_POL.1.t

	desc = { # Germany
		text = nonhist_POL.1.d.a
		trigger = {
			original_tag = GER
		}
	}
	desc = { # Russia
		text = nonhist_POL.1.d.b
		trigger = {
			original_tag = SOV
		}
	}
	desc = { # Byzantium
		text = nonhist_POL.1.d.c
		trigger = {
			original_tag = GRE
		}
	}
	desc = { # France
		text = nonhist_POL.1.d.e
		trigger = {
			original_tag = FRA
		}
	}

	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept, Poland forms a faction
		name = nonhist_POL.1.a
		ai_chance = {
			factor = 70
			modifier = {
				threat > 0.3
				add = 30
			}
		}
		add_ai_strategy = {
			type = alliance
			id = "POL"
			value = 200
		}
		FROM = { country_event = nonhist_POL.2 }
	}
	option = { #no
		name = nonhist_POL.1.b
		ai_chance = {
			factor = 30
			modifier = {
				has_wargoal_against = POL
				factor = 0
			}
		}
		FROM = { country_event = nonhist_POL.3 }
	}
	option = { #Germany agrees with the caviat that Poland cedes Danzig because I'm player Germany and if I don't get Danzig the game is literally unplayable, the devs should spend less time making a Polish focus tree and more time fixing the ai.
		name = nonhist_POL.1.c
		ai_chance = {
			factor = 60
			modifier = {
				has_wargoal_against = POL
				add = 30
			}
		}
		trigger = {
			original_tag = GER
			OR = {
				POL = { owns_state = 807 }
				POL = { owns_state = 85 }
				POL = { owns_state = 86 }
			}
		}
		FROM = { country_event = nonhist_POL.400 } #germany demands danzig for alliance
	}
	option = { #Russia agrees but poland must cede the east
		name = nonhist_POL.1.e
		ai_chance = {
			factor = 40
			modifier = {
				has_wargoal_against = POL
				add = 30
			}
		}
		trigger = {
			original_tag = SOV
			OR = {
				POL = { owns_state = 89 }
				POL = { owns_state = 91 }
				POL = { owns_state = 93 }
				POL = { owns_state = 94 }
				POL = { owns_state = 95 }
				POL = { owns_state = 96 }
				POL = { owns_state = 97 }
				POL = { owns_state = 784 }
			}
		}
		FROM = { country_event = nonhist_POL.401 }
	}
	option = { #France agrees but poland must cede foreign policy (puppet)
		name = nonhist_POL.1.f
		ai_chance = {
			factor = 40
			modifier = {
				has_wargoal_against = POL
				add = 30
			}
		}
		trigger = {
			original_tag = FRA
			OR = {
				GER = {
					OR = {
						exists = no
						is_subject_of = FRA
						has_war_with = FRA
					}
				}
				PRE = {
					AND = {
						exists = yes
						is_subject_of = FRA
					}
				}
			}
		}
		FROM = { country_event = nonhist_POL.402 }
	}
}

#whoever accepts
country_event = {
	id = nonhist_POL.2
	title = nonhist_POL.2.t
	desc = nonhist_POL.2.desc
	picture = GFX_report_event_generic_sign_treaty2
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept, Poland forms a faction
		name = nonhist_POL.2.a
		set_rule = {
			can_create_factions = yes
		}
		if = {
			limit = {
				ROOT = { is_faction_leader = yes }
			}
			if = {
				limit = {
					FROM = {
						original_tag = GER
					}
				}
				ROOT = { set_faction_name = POL_GER_ALLIANCE }
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = FRA
					}
				}
				ROOT = { set_faction_name = POL_FRA_ALLIANCE }
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = GRE
					}
				}
				ROOT = { set_faction_name = POL_GRE_ALLIANCE }
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = SOV
					}
				}
				ROOT = { set_faction_name = POL_SOV_ALLIANCE }
			}
			
		}
		else = {
			if = {
				limit = {
					FROM = {
						original_tag = GER
					}
				}
				ROOT = { create_faction = POL_GER_ALLIANCE }
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = FRA
					}
				}
				ROOT = { create_faction = POL_FRA_ALLIANCE }
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = GRE
					}
				}
				ROOT = { create_faction = POL_GRE_ALLIANCE }
			}
			else_if = {
				limit = {
					FROM = {
						original_tag = SOV
					}
				}
				ROOT = { create_faction = POL_SOV_ALLIANCE }
			}
		}
		every_country = {
			limit = {
				is_in_faction_with = FROM
			}
			ROOT = { add_to_faction = PREV }
		}
		

	}
}

#they refuse
country_event = {
	id = nonhist_POL.3
	title = nonhist_POL.3.t
	desc = nonhist_POL.3.desc
	picture = GFX_report_event_generic_rally2
	
	is_triggered_only = yes

	fire_only_once = yes

	option = {
		name = nonhist_POL.3.a
		if = {
			limit = {
				any_country = {
					is_in_faction_with = FROM
					any_controlled_state = {
						is_fully_controlled_by = PREV
						any_neighbor_state = {
							is_controlled_by = ROOT
						}
					}
				}
			}
			create_wargoal = {
				type = puppet_wargoal_focus
				target = FROM
			}
		}
	}
}

#Germany asks for Danzig in ecxhange for Alliance  -  -  taken over basegame event
country_event = {
	id = nonhist_POL.400
	title = NSB_poland_events.303.t
	desc = NSB_poland_events.303.desc
	picture = GFX_report_event_generic_parliament
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept, Poland cedes Danzig and Germany joins the faction.
		name = NSB_poland_events.303.a
		ai_chance = {
			factor = 40
			modifier = {
				add = -25
				GER = { has_army_size = { size < 40 } }
			}
			modifier = {
				add = 100
				GER = { has_army_size = { size > 39 } }
			}
		}
		set_rule = {
			can_create_factions = yes
		}
		create_faction = POL_GER_ALLIANCE
		add_to_faction = GER
		if = {
			limit = {
				owns_state = 807
			}
			807 = { add_core_of = GER }
			GER = { transfer_state = 807 }
		}
		if = {
			limit = {
				owns_state = 85
			}
			85 = { add_core_of = GER }
			GER = { transfer_state = 85 }
		}
		if = {
			limit = {
				owns_state = 86
			}
			86 = { add_core_of = GER }
			GER = { transfer_state = 86 }
		}
	}

	option = { #Refuse, don't give Germany Danzig but they get a wargoal to stop players from ragequitting over Danzig. Again.
		name = germany.86.b
		ai_chance = {
			factor = 30
		}
		effect_tooltip = {
			GER = {
				create_wargoal = {
					type = take_state
					target = POL
					generator = { 85 86 807 }
				}
			}
		}
		hidden_effect = {
			GER = { country_event = { id = nonhist_POL.5 days = 2 } }
		}
	}
}

#Russia asks for east in exchange for alliance
country_event = {
	id = nonhist_POL.401
	title = nonhist_POL.401.t
	desc = nonhist_POL.401.desc
	picture = GFX_report_event_generic_parliament
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept, Poland cedes East and russia joins the faction.
		name = nonhist_POL.401.a
		ai_chance = {
			factor = 30
			modifier = {
				add = -25
				SOV = { has_army_size = { size < 40 } }
			}
			modifier = {
				add = 100
				SOV = { has_army_size = { size > 39 } }
			}
		}
		set_rule = {
			can_create_factions = yes
		}
		create_faction = POL_SOV_ALLIANCE
		add_to_faction = SOV
		if = {
			limit = {
				owns_state = 89
			}
			89 = { add_core_of = SOV }
			SOV = { transfer_state = 89 }
		}
		if = {
			limit = {
				owns_state = 93
			}
			93 = { add_core_of = SOV }
			SOV = { transfer_state = 93 }
		}
		if = {
			limit = {
				owns_state = 91
			}
			91 = { add_core_of = SOV }
			SOV = { transfer_state = 91 }
		}
		if = {
			limit = {
				owns_state = 94
			}
			94 = { add_core_of = SOV }
			SOV = { transfer_state = 94 }
		}
		if = {
			limit = {
				owns_state = 95
			}
			95 = { add_core_of = SOV }
			SOV = { transfer_state = 95 }
		}
		if = {
			limit = {
				owns_state = 96
			}
			96 = { add_core_of = SOV }
			SOV = { transfer_state = 96 }
		}
		if = {
			limit = {
				owns_state = 97
			}
			97 = { add_core_of = SOV }
			SOV = { transfer_state = 97 }
		}
		if = {
			limit = {
				owns_state = 784
			}
			784 = { add_core_of = SOV }
			SOV = { transfer_state = 784 }
		}
	}

	option = { #Refuse, don't give Germany Danzig but they get a wargoal to stop players from ragequitting over Danzig. Again.
		name = nonhist_POL.401.b
		ai_chance = {
			factor = 40
		}
		effect_tooltip = {
			SOV = {
				create_wargoal = {
					type = take_state
					target = POL
					generator = { 89 91 93 94 95 96 97 784 }
				}
			}
		}
		hidden_effect = {
			SOV = { country_event = { id = nonhist_POL.5 days = 2 } }
		}
	}
}

#France asks for puppet
country_event = {
	id = nonhist_POL.402
	title = nonhist_POL.402.t
	desc = nonhist_POL.402.desc
	picture = GFX_report_event_generic_parliament
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #Accept, Poland cedes to be puppet.
		name = nonhist_POL.402.a
		ai_chance = {
			factor = 30
			modifier = {
				add = -25
				FRA = { has_army_size = { size < 40 } }
			}
			modifier = {
				add = 100
				FRA = { has_army_size = { size > 39 } }
			}
		}
		FROM = {
			set_rule = {
				can_create_factions = yes
			}
			create_faction = POL_FRA_ALLIANCE
			add_to_faction = POL
			puppet = POL
		}
		
	}

	option = { #Refuse,
		name = nonhist_POL.402.b
		ai_chance = {
			factor = 40
		}
		effect_tooltip = {
			FRA = {
				create_wargoal = {
					target = ROOT
					type = puppet_wargoal_focus
				}
			}
		}
		hidden_effect = {
			FRA = { country_event = { id = nonhist_POL.5 days = 2 } }
		}
	}
}

country_event = { #poland refuses demands
	id = nonhist_POL.5
	title = nonhist_POL.5.t
	desc = nonhist_POL.5.desc
	picture = GFX_report_event_military_planning
	
	is_triggered_only = yes

	fire_only_once = yes

	option = { #Danzig or war
		name = nonhist_POL.5.a
		ai_chance = {
			factor = 40
		}
		create_wargoal = {
			target = POL
			type = puppet_wargoal_focus
		}
	}
}



#romanov poland demands transylvania

country_event = {
	id = nonhist_POL.6
	title = nonhist_POL.6.t
	desc = nonhist_POL.6.desc
	picture = GFX_report_event_german_polish_border
	
	is_triggered_only = yes

	option = {#yes 
		name = nonhist_POL.6.a
		ai_chance = {
			factor = 40
			modifier = {
				strength_ratio = { tag = FROM ratio < 0.8 }
				factor = 2
			}
		}
		FROM = { country_event = { id = nonhist_POL.7 } }
		add_stability = -0.15
		add_war_support = -0.1

	}

	option = {#no 
		name = nonhist_POL.6.b
		ai_chance = {
			factor = 60
			modifier = {
				strength_ratio = { tag = FROM ratio < 0.7 }
				factor = 0.2
			}
		}
		FROM = { country_event = { id = nonhist_POL.8 } }
		add_war_support = 0.1
	}
}

#Romania hands over Transylvania
country_event = {
	id = nonhist_POL.7
	title = nonhist_POL.7.t
	desc = nonhist_POL.7.desc
	picture = GFX_report_event_vienna_award_hungary
	
	is_triggered_only = yes

	option = {# 
		name = nonhist_POL.7.a
		hidden_effect = {
			FROM = {
				set_country_flag = second_vienna_accepted_all #needed for event bulgaria.4
			}
		}
		ROOT = {
			if = {
				limit = {
					FROM = {
						controls_state = 76
					}
				}
				transfer_state = 76
			}

			if = {
				limit = {
					FROM = {
						controls_state = 83
					}
				}
				transfer_state = 83
			}

			if = {
				limit = {
					FROM = {
						controls_state = 84
					}
				}
				transfer_state = 84
			}
			
			if = {
				limit = {
					FROM = {
						controls_state = 82
					}
				}
				transfer_state = 82
			}
		}
	}
}

#Romania refuses to hand over Transylvania
country_event = {
	id = nonhist_POL.8
	title = nonhist_POL.8.t
	desc = nonhist_POL.8.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	option = {# Let it go
		name = nonhist_POL.8.a
		ai_chance = {
			factor = 20
			modifier = {
				strength_ratio = { tag = ROM ratio < 1 } #weaker than Romania
				factor = 2
			}
		}
		add_stability = -0.2
		add_war_support = -0.1
		remove_state_claim = 76
		remove_state_claim = 83
		remove_state_claim = 84
	}

	option = {# Prepare for war!
		name = nonhist_POL.8.b
		ai_chance = {
			factor = 80
			modifier = {
				strength_ratio = { tag = FROM ratio > 1.5 }
				factor = 3
			}
			modifier = {
				any_other_country = {
					is_major = yes
					has_guaranteed = ROM
				}
				factor = 0.2
			}
		}
		create_wargoal = {
			type = take_state_focus
			generator = { 76 83 84 82 }
			target = FROM
		}
		add_war_support = 0.1
		add_threat = 3
	}
}

#event to sov from poland demanding peace 
country_event = {
	id = nonhist_POL.9
	title = nonhist_POL.9.t
	desc = nonhist_POL.9.desc
	picture = GFX_report_event_german_polish_border
	
	trigger = {
		POL = {
			OR = {
				has_completed_focus = POL_assert_eastern_claims
				has_completed_focus = POL_assert_eastern_claims_pavel
			}
			controls_state = 202
		}
		original_tag = SOV
		has_war_with = POL
		owns_state = 202
	}
	
	is_triggered_only = no

	fire_only_once = yes

	option = {# fine yes
		name = nonhist_POL.9.a
		ai_chance = {
			factor = 20
			modifier = {
				strength_ratio = { 
					tag = POL 
					ratio < 2 
				} 
			#not twice as strong
				factor = 2
			}
			modifier = {
				strength_ratio = { tag = POL ratio < 1 } #weaker than poland
				factor = 3
			}
		}
		effect_tooltip = {
			every_country = {
				limit = {
					OR = {
						original_tag = POL
						is_in_faction_with = POL
					}
				}
				white_peace = ROOT
			}
			every_country = {
				limit = {
					OR = {
						original_tag = SOV
						is_in_faction_with = ROOT
						is_subject_of = ROOT
					}	
				}
				white_peace = POL
			}
		}
		POL = {
			country_event = { id = nonhist_POL.10 days = 5 }
		}
		
	}

	option = {# no way!
		name = nonhist_POL.9.b
		ai_chance = {
			factor = 20
			modifier = {
				strength_ratio = { tag = POL ratio > 2 } #twice as strong
				factor = 2
			}
			modifier = {
				strength_ratio = { tag = POL ratio > 4 } #four times as strong
				factor = 3
			}
			modifier = {
				strength_ratio = { tag = POL ratio < 1 } #weaker than poland
				factor = 0.5
			}
		}
		
		POL = {
			country_event = { id = nonhist_POL.11 days = 5 }
			effect_tooltip = {
				add_war_support = 0.1
			}
		}
	}
}

#event to sov from poland demanding peace 
country_event = {
	id = nonhist_POL.10
	title = nonhist_POL.2.t
	desc = nonhist_POL.10.desc
	picture = GFX_report_event_german_polish_border
	
	is_triggered_only = yes
	
	fire_only_once = yes

	option = {# fine yes
		name = excellent
		every_country = {
			limit = {
				OR = {
					original_tag = POL
					is_in_faction_with = POL
				}
			}
			white_peace = ROOT
		}
		every_country = {
			limit = {
				OR = {
					original_tag = SOV
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}	
			}
			white_peace = POL
		}
		every_state = {
			limit = {
				is_core_of = SOV
				OWNER = {
					original_tag = SOV
				}
				is_claimed_by = POL
			}
			POL = {
				transfer_state = PREV
			}
		}
	}
}

country_event = {
	id = nonhist_POL.11
	title = nonhist_POL.5.t
	desc = nonhist_POL.11.desc
	picture = GFX_report_event_german_polish_border
	
	is_triggered_only = yes
	
	fire_only_once = yes

	option = {# nope
		name = nonhist_POL.11.a
		add_war_support = 0.1
	}
}


#####################################################
#CANADA

country_event = { #event for Mexico to say fascists are rising from canadian influence
	id = nonhist_CAN.1
	title = nonhist_CAN.1.t
	desc = nonhist_CAN.1.desc
	picture = GFX_report_event_mex_civil_war
	
	is_triggered_only = yes

	option = { #purge them all!!!
		name = nonhist_CAN.1.a
		ai_chance = {
			factor = 0
			modifier = {
				add = 50
				has_government = communism
				has_stability > 0.7
			}
		}
		add_war_support = -0.1
		add_manpower = -10000
	}

	option = { #take out the upper leadership
		name = nonhist_CAN.1.b
		ai_chance = {
			factor = 1
		}
		add_manpower = -300
		add_war_support = -0.05
		add_timed_idea = { idea = synarchist_support_surge days = 120 }
	}

	option = { #let it happen.
		name = nonhist_CAN.1.c
		ai_chance = {
			factor = 5
			modifier = {
				add = 20
				has_government = democratic
			}
		}
		add_stability = -0.025
		add_timed_idea = { idea = synarchist_support_surge days = 365 }
		add_timed_idea = { idea = paramilitary_training days = 85 }
	}

	option = { #boost them
		name = nonhist_CAN.1.d
		ai_chance = {
			factor = 10
			modifier = {
				add = 50
				has_government = fascism
			}
		}
		add_timed_idea = { idea = synarchist_support_surge days = 720 }
		add_timed_idea = { idea = paramilitary_training days = 365 }
	}
}


####################################################################
#################### ITALY ############################################
#####################################################################

# (YUG) Italy is mean and we can't do anything about it - and this is the second time! (an event to give italy-allied bulgaria yugo land) 
country_event = {
	id = nonhist_ITA.1
	title = nonhist_ITA.1.t
	desc = nonhist_ITA.1.desc
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes

	# We have no option but to accept
	option = { 
		name = BBA_italy_interaction_events.29.a 

		ai_chance = { 
			base = 100
		}

		106 = {
			remove_core_of = YUG
		}
		IF = {
			limit = {
				NOT = {
					106 = {
						is_controlled_by = BUL
					}
				}
			}
			BUL = {
				transfer_state = 106
			}
		}
		IF = {
			limit = {
				NOT = {
					803 = {
						is_controlled_by = BUL
					}
				}
			}
			BUL = {
				transfer_state = 803
			}
		}
		IF = {
			limit = {
				NOT = {
					106 = {
						is_core_of = BUL
					}
				}
			}
			106 = {
				add_core_of = BUL
			}
		}
		IF = {
			limit = {
				NOT = {
					803 = {
						is_core_of = BUL
					}
				}
			}
			803 = {
				add_core_of = BUL
			}
		}
	}

	# I don't like italy
	option = { 
		name = BBA_italy_interaction_events.29.b 
		
		ai_chance = { 
			base = 0
		}

		trigger = {
			is_subject = no
		}

		ROOT = {
			leave_faction = yes
		}
	}
}

############################################################################
######################## CHINA #############################################
############################################################################

country_event = { #event for Shanxi/Sinkiang to warn communist china might integrate them!
	id = nonhist_CHI.1
	title = nonhist_CHI.1.t
	desc = nonhist_CHI.1.desc
	picture = GFX_report_event_chinese_army_training
	
	is_triggered_only = yes

	option = { #ok
		name = nonhist_CHI.1.a
		ai_chance = {
			factor = 1
		}
	}

	option = { #this will never happen
		name = nonhist_CHI.1.b
		ai_chance = {
			factor = 0
		}
		custom_effect_tooltip = PRC_cannot_integrate_me_tt
		hidden_effect = { set_country_flag = PRC_cannot_integrate_me }
	}

}

country_event = {
	id = nonhist_CHI.2 # replacement for wtt_warlord_vs_prc.1, exists to replace wtt_warlord_vs_prc.2
	title = wtt_warlord_vs_prc.1.t
	desc = wtt_warlord_vs_prc.1.desc
	picture = GFX_report_event_stalin_meeting

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			FROM = { save_event_target_as = warlord }
			save_event_target_as = soviet
			event_target:WTT_communist_china = { save_event_target_as = communist_china }
		}
	}
	
	#Accept support
	option = {
		name = wtt_warlord_vs_prc.1.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				PRC = {
					is_ai = no
				}
			}
		}
		custom_effect_tooltip = wtt_warlord_vs_prc.1.a_tooltip

		#Clear flag on old support, if any.
		hidden_effect = {
			random_country = {
				limit = { has_country_flag = WTT_support_from_soviet }
				clr_country_flag = WTT_support_from_soviet
			}
			FROM = { set_country_flag = WTT_support_from_soviet }
		}

		event_target:communist_china = {
			country_event = { id = nonhist_CHI.3 }
		}
	}

	#Refuse support
	option = {
		name = wtt_warlord_vs_prc.1.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				FROM = {
					is_ai = no
				}
			}
		}
		FROM = {
			country_event = { id = wtt_warlord_vs_prc.3 }
		}
	}
}

country_event = {
	id = nonhist_CHI.3 #replacement for wtt_warlord_vs_prc.2
	title = wtt_warlord_vs_prc.2.t
	desc = wtt_warlord_vs_prc.2.desc
	picture = GFX_report_event_soviet_japanese_pact

	is_triggered_only = yes
	
	#Accept defeat
	option = {
		name = wtt_warlord_vs_prc.2.a
		ai_chance = { 
			base = 10
		}
		event_target:warlord = {
			PRC_transfer_negative_spirits = yes
			every_country = {
				limit = {
					is_subject_of = event_target:communist_china
				}
				event_target:warlord = {
					puppet = PREV
				}
			}
			if = {
				limit = {
					event_target:communist_china = {
						is_in_faction_with = SOV
					}
					SOV = {
						is_faction_leader = yes
					}
					event_target:warlord = {
						is_in_faction = no
					}
				}
				SOV = {
					add_to_faction = event_target:warlord
				}
			}
			every_country = {
				limit = { has_war_with = event_target:communist_china }
				event_target:warlord = { add_to_war = { targeted_alliance = ROOT enemy = PREV hostility_reason = asked_to_join } }
			}
			annex_country = { target = event_target:communist_china transfer_troops = yes }
			save_global_event_target_as = WTT_communist_china
			country_event = { id = wtt_warlord_vs_prc.4 }
			
			hidden_effect = {
				PRC_soviet_tribute_level_up = yes
				load_focus_tree = china_communist_focus 
			}
		}
	}

	#Refuse and go to war
	option = {
		ai_chance = { 
			base = 0
		}
		name = wtt_warlord_vs_prc.2.b
		if = {
			limit = {
				is_in_faction_with = event_target:warlord
				is_faction_leader = yes
			}
			remove_from_faction = event_target:warlord
		}
		else_if = {
			limit = {
				is_in_faction_with = event_target:warlord
				event_target:warlord = { is_faction_leader = yes }
			}
			event_target:warlord = { remove_from_faction = event_target:communist_china }
		}
		else_if = {
			limit = {
				is_in_faction_with = event_target:warlord
			}
			random_country = {
				limit = {
					is_faction_leader = yes
					is_in_faction_with = event_target:warlord
				}
				remove_from_faction = event_target:warlord
				remove_from_faction = event_target:communist_china
			}
		}
		declare_war_on = {
			target = event_target:warlord
			type = annex_everything
		}
		declare_war_on = {
			target = event_target:soviet
			type = annex_everything
		}

		hidden_effect = {
			#If not neighboring new commies or SOV
			if = {
				limit = {
					NOT = {
						any_neighbor_country = {
							OR = {
								tag = event_target:warlord
								is_subject_of = event_target:soviet
								tag = event_target:soviet
							}
						}
					}
				}
				random_country = {
					limit = {
						if = {
							limit = {
								XSM = {
									any_neighbor_country = {
										tag = event_target:warlord
									}
									any_neighbor_country = {
										tag = event_target:communist_china
									}
								}
							}
							tag = XSM
							else = {
								any_neighbor_country = {
									tag = event_target:warlord
								}
								any_neighbor_country = {
									tag = event_target:communist_china
								}
							}
						}						
					}
					country_event = wtt_warlord_vs_prc.10
				}
			}
		}
	}
}

country_event = { #event chinese leader to say manchu wants to peace out and help us
	id = nonhist_CHI.4
	title = nonhist_CHI.4.t
	desc = nonhist_CHI.4.desc
	picture = GFX_report_event_chinese_japanese_handshake
	
	is_triggered_only = yes

	option = { #ok
		name = nonhist_CHI.4.a
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_war_with = FROM
		}
		white_peace = FROM
		every_other_country = {
			limit = {
				NOT = {
					tag = ROOT
				}
				OR = {
					is_in_faction_with = ROOT
					is_subject_of = ROOT
				}
			}
			white_peace = FROM
		}
		
	}

	option = { #this will never happen
		name = nonhist_CHI.4.b
		ai_chance = {
			factor = 0
		}
		trigger = {
			has_war_with = FROM
		}
		#nothing happens
	}
}

country_event = { #event chinese leader to say manchu wants them to make peace with communists
	id = nonhist_CHI.5
	title = nonhist_CHI.4.t
	desc = nonhist_CHI.4.desc
	picture = GFX_report_event_chinese_japanese_handshake
	
	is_triggered_only = yes

	option = { #ok
		name = nonhist_CHI.4.a
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_war_with = PRC
		}
		PRC = {
			country_event = wtt_xian_incident.301
		}
	}

	option = { #this will never happen
		name = nonhist_CHI.4.b
		ai_chance = {
			factor = 0
		}
		trigger = {
			has_war_with = PRC
		}
		#nothing happens
	}
}

country_event = { #event for manchuria to say they won borderwar against japan
	id = nonhist_CHI.6
	title = wtt_border_conflict_won_attacker.1.t
	desc = wtt_border_conflict_won_attacker.1.desc
	
	picture = GFX_report_event_chinese_soldiers_city_ruin

	is_triggered_only = yes
	
	option = {
		name = wtt_border_conflict_won_attacker.1.a
		add_political_power = 100
		transfer_state = 609
	}	
}

country_event = { #event for germany to say russia/manchuria is offering belarus and ukraine
	id = nonhist_CHI.7
	title = nonhist_CHI.7.t
	desc = nonhist_CHI.7.desc
	
	picture = GFX_report_event_german_advisors_remain

	is_triggered_only = yes
	
	option = {
		name = nonhist_CHI.7.a
		ai_chance = {
			factor = 7
		}
		FROM = {
			country_event = nonhist_CHI.13
		}
		add_political_power = -50
		add_timed_idea = { idea = MAN_NHMMAP_russian_volunteers days = 180 }
		hidden_effect = {
			set_global_flag = MAN_ukr_blr_decision_GER_will_get_them
		}
		send_equipment = {
			equipment = infantry_equipment
			amount = 16000
			target = FROM
		}
		send_equipment = {
			equipment = support_equipment
			amount = 1600
			target = FROM
		}
		send_equipment = {
			equipment = artillery_equipment
			amount = 2000
			target = FROM
		}
		send_equipment = {
			equipment = motorized_equipment
			amount = 400
			target = FROM
		}
		send_equipment = {
			equipment = medium_tank_chassis
			amount = 200
			target = FROM
		}
	}	
	option = {
		name = nonhist_CHI.7.b
		ai_chance = {
			factor = 0
		}
		add_political_power = 10
		FROM = {
			country_event = nonhist_CHI.11
			hidden_effect = {
				clr_country_flag = MAN_ukr_blr_decision_made
			}
		}
	}	
}


country_event = { #event for man to say a soviet country is having an uprising
	id = nonhist_CHI.8 
	title = nonhist_CHI.8.t #HIDDEN NO LOC
	desc = nonhist_CHI.8.desc #HIDDEN NO LOC

	is_triggered_only = yes
	hidden = yes #HIDDEN NO LOC
	fire_only_once = no
	immediate = {
		if = {
			limit = {
				ROOT = {
					has_war_with = SOV
				}
			}
			hidden_effect = {
			
				random_list = {
					20 = {
						#nothing ever happens chudface 
						modifier = {
							always = yes
							factor = MAN_times_nationalist_revolted
						}
					}
					6 = { # Ukrainian uprising
						modifier = {
							factor = 0
							any_state = {
								is_core_of = UKR
								is_owned_by = SOV
								controller = {
									NOT = {
										original_tag = SOV
									}
								}
							}
						}
						modifier = {
							factor = 0
							OR = { 
								has_country_flag = ukr_uprising_flag
								UKR = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = UKR }
						set_country_flag = ukr_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					2 = { # Belarussan uprising
						modifier = {
							factor = 0
							any_state = {
								is_core_of = BLR
								is_owned_by = SOV
								controller = {
									NOT = {
										original_tag = SOV
									}
								}
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = blr_uprising_flag
								BLR = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = BLR }
						set_country_flag = blr_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # CRI uprising
						modifier = {
							factor = 0
							any_state = {
								is_core_of = CRI
								is_owned_by = SOV
								controller = {
									NOT = {
										original_tag = SOV
									}
								}
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = CRI_uprising_flag
								CRI = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = CRI }
						set_country_flag = CRI_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # KAR uprising
						modifier = {
							factor = 0
							any_state = {
								is_core_of = KAR
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = KAR_uprising_flag
								KAR = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = KAR }
						set_country_flag = KAR_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
						IF = {
							limit = {
								FIN = {
									exists = yes
									NOT = {
										has_government = communism
									}
								}
							}
							FIN = { country_event = AAT_finland_kinship_war.06 }
						}
						hidden_effect = {
							#Add Repola and Uhtua VPs
							add_victory_points = {
								province = 6098 #Repola
								value = 1
							}
							add_victory_points = {
								province = 3067 #Uhtua
								value = 1
							}
							#Add Porajärvi VP
							add_victory_points = {
								province = 2998 #Porajärvi
								value = 1
							}
	
							KAR = {
								set_capital = {
									state = 215
								}
	
								division_template = {
									name = "Karjalan Metsäsissit"
									is_locked = yes
									priority = 1
									template_counter = 27
									regiments = {
										infantry = { x = 0 y = 0 }
										infantry = { x = 0 y = 1 }
										infantry = { x = 0 y = 2 }
										infantry = { x = 1 y = 0 }
										infantry = { x = 1 y = 1 }
									}
								}
								every_owned_state = {
									limit = { is_core_of = KAR }
									create_unit = { 
										division = "name = \"Karjalan Metsäsissit\" division_template = \"Karjalan Metsäsissit\" start_experience_factor = 0.05 start_equipment_factor = 0.95"
										owner = KAR
										count = 1
									}
								}
								# Add extra country leader trait to the possible leaders (fascist & non-aligned)
								KAR_ukki_vainamoinen = {
									add_country_leader_trait = {
										 ideology = fascism_ideology
										 trait = veteran_guerrilla_fighter
									 }
								}
								KAR_jalmari_takkinen = {
									add_country_leader_trait = veteran_guerrilla_fighter
								}
							}
						}
						
					}
					# The Caucasus 
					3 = { # Georgian uprising
						modifier = {
							factor = 0
							OR = {
								has_country_flag = geo_uprising_flag
								GEO = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = GEO }
						set_country_flag = geo_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					2 = { # Armenian uprising
						modifier = {
							factor = 0
							any_state = {
								is_core_of = ARM
								is_owned_by = SOV
								controller = {
									NOT = {
										original_tag = SOV
									}
								}
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = arm_uprising_flag
								ARM = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = ARM }
						set_country_flag = arm_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					2 = { # Azer uprising
						modifier = {
							factor = 0
							OR = {
								has_country_flag = azr_uprising_flag
								AZR = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = AZR }
						set_country_flag = azr_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					2 = { # Kalmyk uprising
						modifier = {
							factor = 0
							OR = {
								has_country_flag = KAL_uprising_flag
								KAL = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = KAL }
						set_country_flag = KAL_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # DAG uprising
						modifier = {
							add = SOV_civil_war_months
							always = yes
						}
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = DAG
								is_controlled_by = SOV
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = DAG_uprising_flag
								DAG = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = DAG }
						set_country_flag = DAG_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # CIN uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = CIN
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = CIN_uprising_flag
								CIN = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = CIN }
						set_country_flag = CIN_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # ABK uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = ABK
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = ABK_uprising_flag
								ABK = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = ABK }
						set_country_flag = ABK_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
	
					# The Urals
					1 = { # KOM uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = KOM
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = KOM_uprising_flag
								KOM = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = KOM }
						set_country_flag = KOM_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # NEN uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = NEN
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = NEN_uprising_flag
								NEN = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = NEN }
						set_country_flag = NEN_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
	
					# Central Asia
					1 = { # Khivan uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = KHI
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = khi_uprising_flag
								KHI = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = KHI }
						set_country_flag = khi_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # Bukharan uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = BUK
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = buk_uprising_flag
								BUK = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = BUK }
						set_country_flag = buk_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # Kazakh uprising
						modifier = {
							factor = 0
							any_state = {
								is_core_of = KAZ
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = kaz_uprising_flag
								KAZ = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = KAZ }
						set_country_flag = kaz_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # UZB uprising
						modifier = {
							factor = 0
							any_state = {
								is_core_of = UZB
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = uzb_uprising_flag
								UZB = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = UZB }
						set_country_flag = uzb_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # KKP uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = KKP
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = kkp_uprising_flag
								KKP = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = KKP }
						set_country_flag = kkp_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # TMS uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = TMS
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = tms_uprising_flag
								TMS = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = TMS }
						set_country_flag = tms_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # KYR uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = KYR
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = KYR_uprising_flag
								KYR = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = KYR }
						set_country_flag = KYR_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
					1 = { # TAJ uprising
						modifier = {
							factor = 0.25
							any_state = {
								is_core_of = TAJ
								is_controlled_by = MAN
							}
						}
						modifier = {
							factor = 0
							OR = {
								has_country_flag = TAJ_uprising_flag
								TAJ = { exists = yes }
							}
						}
						set_variable = { SOV_nationalist_country = TAJ }
						set_country_flag = TAJ_uprising_flag
						MAN = { country_event = nonhist_CHI.9 }
					}
	
				}
				country_event = {
					id = nonhist_CHI.8
					days = 7
					random_days = 35
				}
			}
		}
		
	}
	
	option = {
		name = nonhist_CHI.8.a
	}
}

country_event = { #event for manchuria to say soviet nationalists are revolting (same as the NSB_soviet_nationalist.001 event)
	id = nonhist_CHI.9
	title = NSB_soviet_nationalist.001.t
	desc = NSB_soviet_nationalist.001.desc
	
	picture = GFX_report_event_generic_rally2

	is_triggered_only = yes
	hidden = no

	immediate = {
		add_to_variable = {
			var = MAN_times_nationalist_revolted
			value = 1
		}
		every_country = {
			limit = {
				OR = {
					original_tag = SOV
					original_tag = MAN
				}
			}
			every_owned_state = {
				limit = { is_core_of = var:MAN.SOV_nationalist_country }
				var:MAN.SOV_nationalist_country = { transfer_state = PREV }
			}
		}
		# Capture any Stalinist soldiers in our territory
		every_state = {
			limit = { is_owned_by = var:MAN.SOV_nationalist_country}
			SOV = { 
				delete_unit = { 
					state = PREV 
					disband = no 
				}
			}
		}
		var:MAN.SOV_nationalist_country  = {
			division_template = {
				name = "Resistance Fighters"
				is_locked = yes
				priority = 1
				template_counter = 3
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
					infantry = { x = 1 y = 0 }
					infantry = { x = 1 y = 1 }
				}
				is_locked = yes 
			}
			every_owned_state = {
				limit = { is_core_of = var:MAN.SOV_nationalist_country }
				create_unit = { 
					division = "name = \"Resistance Fighters\" division_template = \"Resistance Fighters\" start_experience_factor = 0.05 start_equipment_factor = 0.95" owner = var:MAN.SOV_nationalist_country count = 2
				}
			}
			random_owned_state = {
				limit = { 
					is_core_of = var:MAN.SOV_nationalist_country 
					is_capital = yes
				}
				create_unit = { 
					division = "name = \"Resistance Fighters\" division_template = \"Resistance Fighters\" start_experience_factor = 0.05 start_equipment_factor = 0.95" owner = var:MAN.SOV_nationalist_country count = 2
				}
			}
		
		
		}
		var:MAN.SOV_nationalist_country = {
			if = { #karelia follows finland ideology
				limit = {
					var:MAN.SOV_nationalist_country = { tag = KAR }
				}
				if = { 
					limit = {
						FIN = {
							has_government = fascism
						}
					}
					set_popularities = {
						communism = 20
						democratic = 20
						fascism = 40
						neutrality = 20
					}
					set_politics = { 
						ruling_party = fascism
						elections_allowed = no 
					}
				}
				if = { 
					limit = {
						FIN = {
							has_government = communism
						}
					}
					set_popularities = {
						communism = 40
						democratic = 20
						fascism = 20
						neutrality = 20
					}
					set_politics = { 
						ruling_party = communism
						elections_allowed = no 
					}
				}
				if = { 
					limit = {
						FIN = {
							has_government = neutrality
						}
					}
					set_popularities = {
						communism = 20
						democratic = 20
						fascism = 20
						neutrality = 40
					}
					set_politics = { 
						ruling_party = neutrality
						elections_allowed = yes 
					}
				}
				if = { 
					limit = {
						FIN = {
							has_government = democratic
						}
					}
					set_popularities = {
						communism = 20
						democratic = 40
						fascism = 20
						neutrality = 20
					}
					set_politics = { 
						ruling_party = democratic
						elections_allowed = yes 
					}
				}
			}
			else = {
				random_list = { #chance of being an ideology based on popularity
					100 = {
						modifier = {
							factor = party_popularity@fascism
							always = yes
						}
						set_politics = { 
							ruling_party = fascism
							elections_allowed = no 
						}
					}
					100 = {
						modifier = {
							factor = party_popularity@communism
							always = yes
						}
						set_politics = { 
							ruling_party = communism
							elections_allowed = no 
						}
					}
					100 = {
						modifier = {
							factor = party_popularity@democratic
							always = yes
						}
						set_politics = { 
							ruling_party = democratic
							elections_allowed = yes 
						}
					}
					100 = {
						modifier = {
							factor = party_popularity@neutrality
							always = yes
						}
						set_politics = { 
							ruling_party = neutrality
							elections_allowed = yes 
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_government = communism
					}
				}
				add_popularity = {
					ideology = communism
					popularity = -0.1
				}
			}
			set_country_flag = SOV_breakaway_country_flag
			set_country_flag = SOV_unrecognized_country_flag 
			set_rule = { can_join_factions = no }
		}
		# Renaming of cities where apropriate 
		IF = {
			limit = { var:MAN.SOV_nationalist_country = { tag = KYR }}
			set_province_name = {
				id = 12583
				name = SOV_Bishkek
			}
		}
		ELSE_IF = {
			limit = { var:MAN.SOV_nationalist_country = { tag = MEL }}
			set_province_name = {
				id = 9402
				name = SOV_Krasnokokshaysk
			}
		}
	}
	
	option = {
		name = NSB_soviet_nationalist.001.a	
		ai_chance = {
			base = 5 # The AI needs all the help it can get
		}
		#Check for Karelian uprising since war against SOS (AI Stalin) is declared there
		if = {
			limit = {
				check_variable = { MAN.SOV_nationalist_country = KAR }
				FIN = {
					exists = yes
					has_capitulated = no
					has_country_flag = FIN_full_support_for_karelia_flag
				}
			}
			var:MAN.SOV_nationalist_country = {
				add_named_threat = { 
					threat = -1
					name = indepence_war_threat
				}
				effect_tooltip = {
					declare_war_on = {
						target = SOV
						type = independence_wargoal
					}
				}
			}
		}
		else = {
			var:MAN.SOV_nationalist_country = {
				add_named_threat = { 
					threat = -1
					name = indepence_war_threat
				}
				declare_war_on = {
					target = SOV
					type = independence_wargoal
				}
			}
		}

		var:MAN.SOV_nationalist_country = {
			give_military_access = ROOT
		}
		ROOT = {
			give_military_access = var:MAN.SOV_nationalist_country
		}
	}

	option = {
		name = NSB_soviet_nationalist.001.b	
		ai_chance = {
			base = 1
		}

		#Check for Karelian uprising since war against SOS (AI Stalin) is declared there
		if = {
			limit = {
				check_variable = { MAN.SOV_nationalist_country = KAR }
				FIN = {
					exists = yes
					has_capitulated = no
					has_country_flag = FIN_full_support_for_karelia_flag
				}
			}
			effect_tooltip = {
				var:MAN.SOV_nationalist_country = {
					declare_war_on = {
						target = SOV
						type = independence_wargoal
					}
				}
			}
		}

		var:MAN.SOV_nationalist_country = {
			add_named_threat = { 
				threat = -1.5
				name = indepence_war_threat
			}
			declare_war_on = {
				target = ROOT
				type = independence_wargoal
			}
			declare_war_on = {
				target = SOV
				type = independence_wargoal
			}
		}

		#Check for Karelian uprising and Finnish commitment to show in tooltip when appropriate
		if = {
			limit = {
				check_variable = { MAN.SOV_nationalist_country = KAR }
				FIN = {
					exists = yes
					has_capitulated = no
					has_country_flag = FIN_full_support_for_karelia_flag
				}
			}
			effect_tooltip = {
				FIN = {
					add_to_war = {
						targeted_alliance = KAR
						enemy = ROOT
						hostility_reason = asked_to_join
					}
				}
			}
			hidden_effect = {
				declare_war_on = {
					target = FIN
					type = independence_wargoal
				}
			}
		}
	}
}

country_event = { #event for eng to say russia/manchuria is offering armenia
	id = nonhist_CHI.10
	title = nonhist_CHI.10.t
	desc = nonhist_CHI.10.desc
	
	picture = GFX_report_event_german_advisors_remain

	is_triggered_only = yes
	
	option = {
		name = nonhist_CHI.7.a
		ai_chance = {
			factor = 10
		}
		add_political_power = -50
		FROM = {
			country_event = nonhist_CHI.13
		}
		add_timed_idea = { idea = MAN_NHMMAP_russian_volunteers days = 180 }
		hidden_effect = {
			set_global_flag = MAN_eng_will_get_armenia
		}
		send_equipment = {
			equipment = infantry_equipment
			amount = 10000
			target = FROM
		}
		send_equipment = {
			equipment = support_equipment
			amount = 800
			target = FROM
		}
		send_equipment = {
			equipment = artillery_equipment
			amount = 1200
			target = FROM
		}
		send_equipment = {
			equipment = small_plane_airframe
			amount = 200
			target = FROM
		}
	}	
	option = {
		name = nonhist_CHI.7.b
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				has_war = yes
			}
			modifier = {
				factor = 0.5
				IRQ = {
					is_subject_of = ROOT
				}
			}
		}
		add_political_power = 10
		FROM = {
			country_event = nonhist_CHI.11
		}
	}	
}

country_event = { #event for MAN to say FROM (eng, fin or ger) refused
	id = nonhist_CHI.11
	title = nonhist_CHI.11.t
	desc = nonhist_CHI.11.desc
	
	picture = GFX_report_event_german_advisors_remain

	is_triggered_only = yes
	
	option = {
		name = nonhist_CHI.11.a
	}	
}

country_event = { #event for fin to say russia/manchuria is offering greater finland
	id = nonhist_CHI.12
	title = nonhist_CHI.12.t
	desc = nonhist_CHI.12.desc
	
	picture = GFX_report_event_FIN_three_country_cairn_flag_raising

	is_triggered_only = yes
	
	option = {
		name = nonhist_CHI.7.a
		ai_chance = {
			factor = 10
		}
		add_political_power = -50
		FROM = {
			country_event = nonhist_CHI.13
		}
		add_timed_idea = { idea = MAN_NHMMAP_russian_volunteers days = 180 }
		hidden_effect = {
			set_global_flag = MAN_fin_will_get_claims
		}
		send_equipment = {
			equipment = infantry_equipment
			amount = 1500
			target = FROM
		}
		send_equipment = {
			equipment = support_equipment
			amount = 100
			target = FROM
		}
		send_equipment = {
			equipment = artillery_equipment
			amount = 120
			target = FROM
		}
	}	
	option = {
		name = nonhist_CHI.7.b
		ai_chance = {
			factor = 2
			modifier = {
				factor = 5
				has_war = yes
			}
		}
		add_political_power = 10
		FROM = {
			country_event = nonhist_CHI.11
		}
	}	
}

country_event = { #event for MAN to say FROM (eng, fin or ger) accepted
	id = nonhist_CHI.13
	title = nonhist_CHI.13.t
	desc = nonhist_CHI.13.desc
	
	picture = GFX_report_event_german_advisors_remain

	is_triggered_only = yes
	
	option = {
		name = nonhist_CHI.13.a
	}	
}

#####################################################
#JAPAN ###############

country_event = { #event for JAP to say we won against SOV
	id = nonhist_JAP.1
	title = nonhist_JAP.1.t
	desc = nonhist_JAP.1.desc
	picture = "[GetJapaneseNegotiationsPicture]"
	
	is_triggered_only = yes
	fire_only_once = no

	option = { #send them a peace deal
		name = nonhist_JAP.1.a
		ai_chance = {
			factor = 7
		}
		SOU = {
			country_event = { id = nonhist_JAP.2 days = 2 }
		}
		hidden_effect = {
			set_global_flag = JAP_SOV_peace_agreement
		}
	}

	option = { #no, we go to war until they capitulate!!!
		name = nonhist_JAP.1.b
		ai_chance = {
			factor = 1
		}
		custom_effect_tooltip = JAP_SOV_upgrade_promise_tt
		if = {
			limit = {
				has_country_flag = JAP_SOV_promise_large_gains
			}
			add_war_support = 0.1
			add_stability = 0.2
			add_political_power = 200
		}
		else_if = {
			limit = {
				has_country_flag = JAP_SOV_promise_mid_gains
			}
			hidden_effect = {
				clr_country_flag = JAP_SOV_promise_mid_gains
				set_country_flag = JAP_SOV_promise_large_gains
			}
		}
		else_if = {
			limit = {
				has_country_flag = JAP_SOV_promise_small_gains
			}
			hidden_effect = {
				clr_country_flag = JAP_SOV_promise_small_gains
				set_country_flag = JAP_SOV_promise_mid_gains
			}
		}
		
	}

}

country_event = { #event for SOV to say JAP is offering peace
	id = nonhist_JAP.2
	title = nonhist_JAP.2.t
	desc = nonhist_JAP.2.desc
	picture = "[GetJapaneseNegotiationsPicture]"
	
	is_triggered_only = yes

	option = { #accept
		name = nonhist_JAP.2.a
		ai_chance = {
			factor = 15
			modifier = {
				factor = 10
				has_war_with = GER
			}
		}
		FROM = {
			country_event = { id = nonhist_JAP.3 days = 2 }
		}
	}

	option = { #no
		name = nonhist_JAP.2.b
		ai_chance = {
			factor = 1
		}
		FROM = {
			country_event = { id = nonhist_JAP.5 days = 2 }
		}
		add_timed_idea = {
			idea = NHMMAP_tired_in_the_east_SOV
			days = 360
		}
		effect_tooltip = {
			JAP = {
				add_timed_idea = {
					idea = NHMMAP_time_to_finish_the_east_JAP
					days = 360
				}
			}
		}
	}

}

country_event = { #event for JAP to say SOV accepts peace
	id = nonhist_JAP.3
	title = soviet.12.t
	desc = nonhist_JAP.3.desc
	picture = "[GetJapaneseNegotiationsPicture]"
	
	is_triggered_only = yes
	fire_only_once = yes

	option = { #we win!
		name = nonhist_JAP.3.a
		ai_chance = {
			factor = 1
		}
		if = {
			limit = {
				has_war_with = MON
			}
			hidden_effect = {
				set_country_flag = JAP_mongolia_included
			}
		}
		if = {
			limit = {
				has_war_with = TAN
			}
			hidden_effect = {
				set_country_flag = JAP_tuva_included
			}
		}
		every_other_country = {
			limit = {
				is_in_faction_with = FROM
			}
			white_peace = ROOT
		}
		add_war_support = 0.1
		if = {
			limit = {
				is_in_faction = yes
				is_faction_leader = no
			}
			leave_faction = yes
		}
		set_rule = {
			can_create_factions = yes
		}
		if = {
			limit = {
				is_faction_leader = no
			}
			create_faction = JAP_hakko_ichiu
			if = {
				limit = {
					check_variable = { ETH.host_nation = JAP }
					ETH = {
						is_government_in_exile = yes
					}
				}
				add_to_faction = ETH
			}
		}
		transfer_state = 655
		add_state_core = 655
		transfer_state = 637
		transfer_state = 874
		transfer_state = 562
		transfer_state = 875
		SOV = {
			give_resource_rights = { receiver = JAP state = 657 }
			give_resource_rights = { receiver = JAP state = 653 }
			give_resource_rights = { receiver = JAP state = 654 }
			give_resource_rights = { receiver = JAP state = 655 }
		}
		
		if = {
			limit = {
				408 = {
					is_core_of = MAN
				}
				MAN = {
					is_subject_of = JAP
				}
			}
			MAN = {
				transfer_state = 408
			}
		}
		else = {
			transfer_state = 408
		}
		if = {
			limit = {
				409 = {
					is_core_of = MAN
				}
				MAN = {
					is_subject_of = JAP
				}
			}
			MAN = {
				transfer_state = 409
			}
		}
		else = {
			transfer_state = 409
		}
		if = {
			limit = {
				657 = {
					is_core_of = MAN
				}
				MAN = {
					is_subject_of = JAP
				}
			}
			MAN = {
				transfer_state = 657
			}
		}
		else = {
			transfer_state = 657
		}
		if = {
			limit = {
				560 = {
					is_core_of = MAN
				}
				MAN = {
					is_subject_of = JAP
				}
			}
			MAN = {
				transfer_state = 560
			}
		}
		else = {
			transfer_state = 560
		}
		if = {
			limit = {
				561 = {
					is_claimed_by = MAN
				}
				MAN = {
					is_subject_of = JAP
				}
			}
			MAN = {
				transfer_state = 561
			}
		}
		else = {
			transfer_state = 561
		}
		if = {
			limit = {
				has_country_flag = JAP_SOV_small_gains_promised
			}
			add_political_power = 50
			FROM = {
				add_timed_idea = { idea = NHMMAP_treaty_of_harbin_1 days = 550 }
			}
		}
		else_if = {
			limit = {
				has_country_flag = JAP_SOV_mid_gains_promised
			}
			transfer_state = 564
			transfer_state = 822
			transfer_state = 565
			if = {
				limit = {
					JAP = {
						NOT = { has_completed_focus = JAP_help_from_russian_exiles }
					}
				}
				transfer_state = 563
			}
			transfer_state = 574
			transfer_state = 644
			transfer_state = 877
			if = {
				limit = {
					has_country_flag = JAP_mongolia_included
				}
				clr_country_flag = JAP_mongolia_included
				if = {
					limit = {
						MEN = {
							exists = yes
							is_subject_of = JAP
						}
					}
					MEN = {
						MON = {
							every_core_state = {
								add_core_of = MEN
							}
						}
						annex_country = {
							target = MON
							transfer_troops = no
						}
					}
				}
				else_if = {
					limit = {
						817 = {
							is_claimed_by = MAN
						}
						MAN = {
							is_subject_of = JAP
						}
					}
					MAN = {
						annex_country = {
							target = MON
							transfer_troops = no
						}
					}
				}
				else = {
					annex_country = {
						target = MON
						transfer_troops = no
					}
				}
			}
			add_political_power = 100
			add_stability = 0.1
			FROM = {
				add_timed_idea = { idea = NHMMAP_treaty_of_harbin_2 days = 550 }
			}
		}
		else_if = {
			limit = {
				has_country_flag = JAP_SOV_large_gains_promised
			}
			transfer_state = 564
			transfer_state = 822
			transfer_state = 565
			if = {
				limit = {
					JAP = {
						NOT = { has_completed_focus = JAP_help_from_russian_exiles }
					}
				}
				transfer_state = 563
			}
			transfer_state = 574
			transfer_state = 644
			transfer_state = 876
			transfer_state = 877
			transfer_state = 878
			transfer_state = 566
			transfer_state = 567
			transfer_state = 568
			transfer_state = 575
			transfer_state = 576
			transfer_state = 516
			if = {
				limit = {
					FROM = {
						controls_state = 329
					}
				}
				transfer_state = 329
			}
			if = {
				limit = {
					has_country_flag = JAP_mongolia_included
				}
				clr_country_flag = JAP_mongolia_included
				if = {
					limit = {
						MEN = {
							exists = yes
							is_subject_of = JAP
						}
					}
					MEN = {
						MON = {
							every_core_state = {
								add_core_of = MEN
							}
						}
						annex_country = {
							target = MON
							transfer_troops = no
						}
					}
				}
				else_if = {
					limit = {
						817 = {
							is_claimed_by = MAN
						}
						MAN = {
							is_subject_of = JAP
						}
					}
					MAN = {
						annex_country = {
							target = MON
							transfer_troops = no
						}
					}
				}
				else = {
					annex_country = {
						target = MON
						transfer_troops = no
					}
				}
			}
			if = {
				limit = {
					has_country_flag = JAP_tuva_included
				}
				clr_country_flag = JAP_tuva_included
				if = {
					limit = {
						MEN = {
							exists = yes
							is_subject_of = JAP
							controls_state = 820
						}
					}
					MEN = {
						TAN = {
							every_core_state = {
								add_core_of = MEN
							}
						}
						annex_country = {
							target = TAN
							transfer_troops = no
						}
					}
				}
				else_if = {
					limit = {
						817 = {
							is_claimed_by = MAN
						}
						MAN = {
							is_subject_of = JAP
							controls_state = 820
						}
					}
					MAN = {
						annex_country = {
							target = TAN
							transfer_troops = no
						}
					}
				}
				else = {
					annex_country = {
						target = TAN
						transfer_troops = no
					}
				}
			}
			add_political_power = 200
			add_stability = 0.2
			FROM = {
				add_timed_idea = { idea = NHMMAP_treaty_of_harbin_3 days = 550 }
			}
		}
		news_event = { id = nonhist_news.3 days = 1 }
		if = {
			limit = {
				has_completed_focus = JAP_help_from_russian_exiles
			}
			country_event = { id = nonhist_JAP.4 days = 7 }
		}
		
	}

}

country_event = { #event for if you will give exiles land, everything but coast or annex them
	id = nonhist_JAP.4
	title = nonhist_JAP.4.t
	desc = nonhist_JAP.4.desc
	picture = "[GetJapaneseNegotiationsPicture]"
	
	is_triggered_only = yes

	option = { #give the exiles all owned territory, except the far east coast and what is claimed by MAN/MEN
		name = nonhist_JAP.4.a
		ai_chance = {
			factor = 1
		}
		random_other_country = {
			limit = {
				original_tag = SOV
				is_subject_of = JAP
			}
			every_state = {
				limit = {
					is_core_of = SOV
					is_owned_and_controlled_by = JAP
					is_coastal = no
				}
				PREV = {
					transfer_state = PREV
				}
			}
			
			if = {
				limit = {
					MAN = {
						OR = {
							NOT = { has_completed_focus = MAN_chinese_leadership }
							exists = no
						}
					}
				}
				transfer_state = 761
				transfer_state = 714
			}
			else = {
				JAP = { transfer_state = 657 }
			}	
			set_global_flag = SOV_soviet_civil_war_over	
				
		}
	}
	option = { #set them up in irkutsk - only if big victory was won
		name = nonhist_JAP.4.b
		ai_chance = {
			factor = 1
		}
		trigger = {
			has_country_flag = JAP_SOV_large_gains_promised
		}
		random_other_country = {
			limit = {
				original_tag = SOV
				is_subject_of = JAP
			}
			transfer_state = 566
			transfer_state = 567
			transfer_state = 568
			transfer_state = 576
			transfer_state = 575
			transfer_state = 876
			transfer_state = 878
			transfer_state = 516
			if = {
				limit = {
					329 = {
						is_owned_and_controlled_by = JAP
					}
				}
				transfer_state = 329
			}
			set_capital = { state = 566 }
		}
		JAP = {
			transfer_state = 563
		}
		set_global_flag = SOV_soviet_civil_war_over

	}
	option = { #set them up in  chita with small state 
		name = nonhist_JAP.4.c
		ai_chance = {
			factor = 1
		}
		random_other_country = {
			limit = {
				original_tag = SOV
				is_subject_of = JAP
			}
			if = {
				limit = {
					564 = {
						is_owned_and_controlled_by = JAP
					}
				}
				transfer_state = 564
			}
			if = {
				limit = {
					565 = {
						is_owned_and_controlled_by = JAP
					}
				}
				transfer_state = 565
			}
			if = {
				limit = {
					566 = {
						is_owned_and_controlled_by = JAP
					}
				}
				transfer_state = 566
			}
			set_global_flag = SOV_soviet_civil_war_over
		}
	}
	option = { #betray them, release FER
		name = nonhist_JAP.4.e
		ai_chance = {
			factor = 1
		}
		random_other_country = {
			limit = {
				original_tag = SOV
				is_subject_of = JAP
			}
			JAP = {
				annex_country = {
					target = PREV
					transfer_troops = no
				}
			}
		}
		release_on_controlled = FER
		puppet = FER
		if = {
			limit = {
				has_dlc = "Waking the Tiger"
			}
			set_autonomy = {
				target = FER
				autonomy_state = autonomy_wtt_imperial_protectorate
			}
		}
		else_if = {
			limit = {
				has_dlc = "Together for Victory"
			}
			set_autonomy = {
				target = FER
				autonomy_state = autonomy_integrated_puppet
			}
		}
		FER = {
			every_state = {
				limit = {
					is_core_of = SOV
					is_owned_and_controlled_by = JAP
				}
				FER = {
					transfer_state = PREV
				}
			}
		}
		if = {
			limit = {
				657 = {
					is_owned_by = FER
				}
			}
			transfer_state = 657
		}
		if = {
			limit = {
				561 = {
					is_owned_by = FER
				}
			}
			transfer_state = 561
		}
		if = {
			limit = {
				563 = {
					is_owned_by = FER
				}
			}
			transfer_state = 563
		}
		FER = {
			every_owned_state = {
				limit = {
					is_coastal = yes
				}
				JAP = {
					transfer_state = PREV
				}
			}
		}
		FER = {
			every_owned_state = {
				add_core_of = FER
			}
		}
	}
	option = { #betray them, annex
		name = nonhist_JAP.4.f
		ai_chance = {
			factor = 1
		}
		random_other_country = {
			limit = {
				original_tag = SOV
				is_subject_of = JAP
			}
			JAP = {
				annex_country = {
					target = PREV
					transfer_troops = no
				}
			}
		}
	}
}

country_event = { #event for JAP to say SOV just declined peace
	id = nonhist_JAP.5
	title = soviet.13.t
	desc = nonhist_JAP.5.desc
	picture = GFX_report_event_japanese_transport_soldiers
	
	is_triggered_only = yes

	option = { #
		name = nonhist_JAP.5.a
		add_timed_idea = {
			idea = NHMMAP_time_to_finish_the_east_JAP
			days = 360
		}
		effect_tooltip = {
			FROM = {
				add_timed_idea = {
					idea = NHMMAP_tired_in_the_east_SOV
					days = 360
				}
			}
		}
	}

}

country_event = { #event for SOV to inform them they just got a bonus against JAP
	id = nonhist_JAP.501
	title = nonhist_JAP.501.t
	desc = nonhist_JAP.501.desc
	picture = GFX_report_event_japanese_transport_soldiers
	
	is_triggered_only = yes

	option = { #
		name = AAT_finland_continuation_war.06.a #actual effect is already applied by what triggered the event
		effect_tooltip = {
			add_ideas = NHMMAP_time_to_finish_the_east_SOV
			FROM = {
				add_ideas = NHMMAP_tired_in_the_east_JAP
			}
		}
	}

}

country_event = { #Japan offers to join us (civil war is not finished yet) 
	id = nonhist_JAP.6
	title = nonhist_JAP.6.t
	desc = nonhist_JAP.6.desc
	picture = GFX_report_event_japanese_transport_soldiers
	
	is_triggered_only = yes

	option = { # yes to all
		name = nonhist_JAP.6.a
		ai_chance = {
			base = 6
		}
		effect_tooltip = {
			JAP = {
				add_to_war = { 
					targeted_alliance = ROOT 
					enemy = SOS 
					hostility_reason = asked_to_join
				}
			}	
			custom_effect_tooltip = NHMMAP_when_civil_war_over
			custom_effect_tooltip = SOV_japan_will_take_these_states
			give_resource_rights = { receiver = JAP state = 657 }
			give_resource_rights = { receiver = JAP state = 653 }
			give_resource_rights = { receiver = JAP state = 654 }
			give_resource_rights = { receiver = JAP state = 655 }
		}
		hidden_effect = {
			JAP = {
				set_country_flag = JAP_SOV_rights
				country_event = nonhist_JAP.601
			}
		}
		
	}
	option = { # no way hosay
		name = nonhist_JAP.6.b
		ai_chance = {
			base = 1
		}
		trigger = {
			is_subject = no
		}
		custom_effect_tooltip = SOV_japan_will_be_angry_tt
		hidden_effect = {
			JAP = {
				country_event = nonhist_JAP.602
				set_country_flag = JAP_SOV_rights_refused
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

}

country_event = { #Sov accepts
	id = nonhist_JAP.601
	title = czech.51.t
	desc = nonhist_JAP.601.desc
	picture = GFX_report_event_japanese_transport_soldiers
	
	is_triggered_only = yes

	option = { #
		name = excellent
		if = {
			limit = {
				FROM = {
					has_civil_war = yes
				}
			}
			add_to_war = { 
				targeted_alliance = FROM 
				enemy = SOS 
				hostility_reason = asked_to_join
			}
		}
		if = {
			limit = {
				has_global_flag = SOV_soviet_civil_war_over
				has_country_flag = JAP_SOV_rights
			}
			transfer_state = 408
			transfer_state = 409
			transfer_state = 655
			transfer_state = 560
			transfer_state = 562
			transfer_state = 822
			transfer_state = 874
			transfer_state = 637
			transfer_state = 875
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_JAP #the siberian purchase
				days = 360
			} 
			FROM = {
				give_resource_rights = { receiver = JAP state = 657 }
				give_resource_rights = { receiver = JAP state = 653 }
				give_resource_rights = { receiver = JAP state = 654 }
				give_resource_rights = { receiver = JAP state = 655 }
				add_timed_idea = {
					idea = NHMMAP_getting_paid_SOV #the siberian purchase
					days = 360
				} 
			}
		}
	}

}

country_event = { #Sov declines
	id = nonhist_JAP.602
	title = czech.52.t
	desc = nonhist_JAP.602.desc
	picture = GFX_report_event_japanese_transport_soldiers
	
	is_triggered_only = yes

	option = { #
		name = nonhist_JAP.602.a
	}

}

country_event = { #Japan offers to buy siberian states
	id = nonhist_JAP.7
	title = nonhist_JAP.7.t
	desc = nonhist_JAP.7.desc
	picture = GFX_report_event_japanese_transport_soldiers
	
	is_triggered_only = yes

	option = { #
		name = nonhist_JAP.7.a
		custom_effect_tooltip = SOV_japan_will_take_these_states
		effect_tooltip = {
			give_resource_rights = { receiver = JAP state = 657 }
			give_resource_rights = { receiver = JAP state = 653 }
			give_resource_rights = { receiver = JAP state = 654 }
			give_resource_rights = { receiver = JAP state = 655 }
			add_timed_idea = {
				idea = NHMMAP_getting_paid_SOV #the siberian purchase
				days = 360
			} 
		}	
		hidden_effect = {
			JAP = {
				country_event = nonhist_JAP.601
				set_country_flag = JAP_SOV_rights
			}
		}
	}

	option = {
		name = nonhist_JAP.7.b
		trigger = {
			is_subject = no
		}
		custom_effect_tooltip = SOV_japan_will_be_angry_tt
		hidden_effect = {
			JAP = {
				country_event = nonhist_JAP.602
				set_country_flag = JAP_SOV_rights_refused
				mark_focus_tree_layout_dirty = yes
			}
		}
	}

}

country_event = { #event for manchu - japan is coming
	id = nonhist_JAP.8
	title = nonhist_JAP.8.t
	desc = nonhist_JAP.8.desc
	picture = GFX_report_event_japanese_transport_soldiers
	
	is_triggered_only = yes

	option = { #
		name = nonhist_JAP.8.a
		set_autonomy = {
			target = KOR
			autonomy_state = autonomy_free
		}
		if = {
			limit = {
				is_in_faction = yes
			}
			var:faction_leader = {
				remove_from_faction = KOR
			}
		}
		if = {
			limit = {
				KOR = {
					has_war = yes
				}
			}
			KOR = {
				every_enemy_country = {
					white_peace = KOR
				}
			}
		}
		hidden_effect = {
			KOR = {
				set_rule = { 
					can_join_factions = no 
				}
			}
		}
		FROM = {
			create_wargoal = {
				target = KOR
				type = puppet_wargoal_focus
				expire = 0
			}
		}
	}

	option = {
		name = nonhist_JAP.8.b
		ai_chance = {
			factor = 0
		}
		FROM = {
			create_wargoal = {
				target = MAN
				type = puppet_wargoal_focus
				expire = 0
			}
		}
	}

}


#GERMANY
################################################################################
############################

country_event = { #I use create_field_marshal and create_corps_commander to avoid crashes, please dont change
	id = nonhist_GER.1
	title = nonhist_GER.1.t 
	desc = nonhist_GER.1.desc
	picture = GFX_report_event_generic_rally_3

	is_triggered_only = yes

	fire_only_once = yes

	immediate = {
		hidden_effect = {
			random_list = {
				80 = {
					set_country_flag = model_survived
				}
				20 = { } # No effect
			}
			random_list = {
				60 = {
					set_country_flag = kruger_survived
				}
				40 = { } # No effect
			}
			random_list = {
				90 = {
					set_country_flag = hausser_survived
				}
				10 = { } # No effect
			}
			random_list = {
				75 = {
					set_country_flag = dietrich_survived
				}
				25 = { } # No effect
			}
			random_list = {
				70 = {
					set_country_flag = himmler_prison
				}
				30 = { } # No effect
			}
			random_list = {
				40 = {
					set_country_flag = goebbels_prison
				}
				60 = { } # No effect
			}
			random_list = {
				20 = {
					set_country_flag = hess_prison
				}
				80 = { } # No effect
			}
			random_list = {
				25 = {
					set_country_flag = bormann_prison
				}
				75 = { } # No effect
			}
			random_list = {
				20 = {
					set_country_flag = keitel_prison
				}
				80 = { } # No effect
			}
			random_list = {
				40 = {
					set_country_flag = goring_prison
				}
				60 = { } # No effect
			}
		}
	}
	
	# reinstate generals only
	option = {
		name = nonhist_GER.1.a
		ai_chance = {
			factor = 0
		}
		if = {  #basically the whole deal with the tooltips/hidden effects here is that in recent versions of hoi4 i've found that add_field_marshal_role and add_corps_commander_role are very unstable, and seem to cause a lot of crashes quite often, so I'm kind of just cheating to avoid that
			limit = {
				has_country_flag = model_survived
			}
			effect_tooltip = {
				add_field_marshal_role = {
					character = "GER_walter_model"
					traits = { defensive_doctrine politically_connected brilliant_strategist trait_cautious }
					skill = 3
					attack_skill = 2
					defense_skill = 4
					planning_skill = 2
					logistics_skill = 2
					legacy_id=10
				}
			}
			hidden_effect = {
				create_field_marshal = {
					name  = "GER_walter_model"
					portrait_path = GFX_portrait_GER_Walter_Model
					traits = { defensive_doctrine politically_connected brilliant_strategist trait_cautious }
					skill = 3
					attack_skill = 2
					defense_skill = 4
					planning_skill = 2
					logistics_skill = 2
				}
			}
			clr_country_flag = model_survived
		}
		if = {
			limit = {
				has_country_flag = kruger_survived
			}
			effect_tooltip = {
				add_corps_commander_role = {
					character = "GER_walter_kruger"
					traits = { panzer_leader trait_reckless }
					skill = 3
					attack_skill = 3
					defense_skill = 3
					planning_skill = 1
					logistics_skill = 3
					legacy_id=15
				}
			}
			hidden_effect = {
				create_corps_commander = {
					name = "GER_walter_kruger"
					portrait_path = GFX_portrait_GER_Walter_Kruger
					traits = { panzer_leader trait_reckless }
					skill = 3
					attack_skill = 3
					defense_skill = 3
					planning_skill = 1
					logistics_skill = 3
				} 
			}
			clr_country_flag = kruger_survived
		}
		if = {
			limit = {
				has_country_flag = hausser_survived
			}
			effect_tooltip = {
				add_corps_commander_role = {
					character = "GER_paul_hausser"
					traits = {  armor_officer }
					skill = 4
					legacy_id = 20
					attack_skill = 3
					defense_skill = 3
					planning_skill = 4
					logistics_skill = 3
				}
			}
			hidden_effect = {
				create_corps_commander = {
					name = "GER_paul_hausser"
					portrait_path = GFX_portrait_GER_Paul_Hausser
					traits = {  armor_officer }
					skill = 4
					attack_skill = 3
					defense_skill = 3
					planning_skill = 4
					logistics_skill = 3
				}
			}
			clr_country_flag = hausser_survived
		}
		if = {
			limit = {
				has_country_flag = dietrich_survived
			}
			effect_tooltip = {
				add_corps_commander_role = {
					character = "GER_sepp_dietrich"
					traits = { armor_officer brilliant_strategist trait_reckless }
					skill = 4
					legacy_id = 24
					attack_skill = 3
					defense_skill = 3
					planning_skill = 5
					logistics_skill = 4
				}
			}
			hidden_effect = {
				create_corps_commander = {
					name = "GER_sepp_dietrich"
					portrait_path = GFX_portrait_GER_Josef_Dietrich
					traits = { armor_officer brilliant_strategist trait_reckless }
					skill = 4
					attack_skill = 3
					defense_skill = 3
					planning_skill = 5
					logistics_skill = 4
				}
			}
			clr_country_flag = dietrich_survived
		}
	}
	
	# Reinstate leaders too
	option = {
		name = nonhist_GER.1.b
		ai_chance = {
			factor = 1
		}
		set_country_flag = GER_reinstated_nazi_leadership
		add_political_power = 75
		add_popularity = { ideology = fascism popularity = 0.05 }
		if = {  #basically the whole deal with the tooltips/hidden effects here is that in recent versions of hoi4 i've found that add_field_marshal_role and add_corps_commander_role are very unstable, and seem to cause a lot of crashes quite often, so I'm kind of just cheating to avoid that
			limit = {
				has_country_flag = model_survived
			}
			effect_tooltip = {
				add_field_marshal_role = {
					character = "GER_walter_model"
					traits = { defensive_doctrine politically_connected brilliant_strategist trait_cautious }
					skill = 3
					attack_skill = 2
					defense_skill = 4
					planning_skill = 2
					logistics_skill = 2
					legacy_id=10
				}
			}
			hidden_effect = {
				create_field_marshal = {
					name  = "GER_walter_model"
					portrait_path = GFX_portrait_GER_Walter_Model
					traits = { defensive_doctrine politically_connected brilliant_strategist trait_cautious }
					skill = 3
					attack_skill = 2
					defense_skill = 4
					planning_skill = 2
					logistics_skill = 2
				}
			}
			clr_country_flag = model_survived
		}
		if = {
			limit = {
				has_country_flag = kruger_survived
			}
			effect_tooltip = {
				add_corps_commander_role = {
					character = "GER_walter_kruger"
					traits = { panzer_leader trait_reckless }
					skill = 3
					attack_skill = 3
					defense_skill = 3
					planning_skill = 1
					logistics_skill = 3
					legacy_id=15
				}
			}
			hidden_effect = {
				create_corps_commander = {
					name = "GER_walter_kruger"
					portrait_path = GFX_portrait_GER_Walter_Kruger
					traits = { panzer_leader trait_reckless }
					skill = 3
					attack_skill = 3
					defense_skill = 3
					planning_skill = 1
					logistics_skill = 3
				} 
			}
			clr_country_flag = kruger_survived
		}
		if = {
			limit = {
				has_country_flag = hausser_survived
			}
			effect_tooltip = {
				add_corps_commander_role = {
					character = "GER_paul_hausser"
					traits = {  armor_officer }
					skill = 4
					legacy_id = 20
					attack_skill = 3
					defense_skill = 3
					planning_skill = 4
					logistics_skill = 3
				}
			}
			hidden_effect = {
				create_corps_commander = {
					name = "GER_paul_hausser"
					portrait_path = GFX_portrait_GER_Paul_Hausser
					traits = {  armor_officer }
					skill = 4
					attack_skill = 3
					defense_skill = 3
					planning_skill = 4
					logistics_skill = 3
				}
			}
			clr_country_flag = hausser_survived
		}
		if = {
			limit = {
				has_country_flag = dietrich_survived
			}
			effect_tooltip = {
				add_corps_commander_role = {
					character = "GER_sepp_dietrich"
					traits = { armor_officer brilliant_strategist trait_reckless }
					skill = 4
					legacy_id = 24
					attack_skill = 3
					defense_skill = 3
					planning_skill = 5
					logistics_skill = 4
				}
			}
			hidden_effect = {
				create_corps_commander = {
					name = "GER_sepp_dietrich"
					portrait_path = GFX_portrait_GER_Josef_Dietrich
					traits = { armor_officer brilliant_strategist trait_reckless }
					skill = 4
					attack_skill = 3
					defense_skill = 3
					planning_skill = 5
					logistics_skill = 4
				}
			}
			clr_country_flag = dietrich_survived
		}
		custom_effect_tooltip = reinstate_nazi_leadership_TT
		if = {
			limit = {
				has_country_flag = himmler_prison
			}
			custom_effect_tooltip = himmler_prison_tt
			hidden_effect = {
				retire_character = GER_heinrich_himmler
			}
			clr_country_flag = himmler_prison
		}
		if = {
			limit = {
				has_country_flag = goebbels_prison
			}
			custom_effect_tooltip = goebbels_prison_tt
			hidden_effect = {
				retire_character = GER_joseph_goebbels
			}
			clr_country_flag = goebbels_prison
		}
		if = {
			limit = {
				has_country_flag = hess_prison
			}
			custom_effect_tooltip = hess_prison_tt
			hidden_effect = {
				retire_character = GER_rudolf_hess
			}
			clr_country_flag = hess_prison
		}
		if = {
			limit = {
				has_country_flag = bormann_prison
			}
			custom_effect_tooltip = bormann_prison_tt
			hidden_effect = {
				retire_character = GER_martin_bormann
			}
			
			clr_country_flag = bormann_prison
		}
		if = {
			limit = {
				has_country_flag = keitel_prison
			}
			custom_effect_tooltip = keitel_prison_tt
			hidden_effect = {
				retire_character = GER_wilhelm_keitel
			}
			clr_country_flag = keitel_prison
		}
		if = {
			limit = {
				has_country_flag = goring_prison
			}
			custom_effect_tooltip = goring_prison_tt
			hidden_effect = {
				retire_character = GER_hermann_goring
			}
			clr_country_flag = goring_prison
		}
	}
}

country_event = { # exchange for east africa
	id = nonhist_GER.2
	title = nonhist_GER.2.t
	desc = nonhist_GER.2.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	fire_only_once = yes

	option = { #small payment
		name = nonhist_GER.2.a
		ai_chance = {
			factor = 5
		}
		ENG = {
			country_event = { id = nonhist_GER.201 days = 4 }
		}		
	}
	option = { #big payment
		ai_chance = {
			factor = 20
		}
		name = nonhist_GER.2.b
		hidden_effect = { set_country_flag = GER_pay_EA_big }
		ENG = {
			country_event = { id = nonhist_GER.201 days = 4 }
		}
	}
	option = { #don't want this colony
		name = nonhist_GER.2.c
		ai_chance = {
			factor = 1
		}
	}
}

country_event = { #event for england offer to buy west africa
	id = nonhist_GER.201
	title = nonhist_GER.201.t
	desc = {
		text = nonhist_GER.201.d.a
		trigger = {
			FROM = { has_country_flag = GER_pay_EA_big }
		}
	}
	desc = {
		text = nonhist_GER.201.d.b
		trigger = {
			NOT = { FROM = { has_country_flag = GER_pay_EA_big } }
		}	
	} 
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	fire_only_once = yes
	
	option = { #yes
		name = nonhist_GER.201.a	
		ai_chance = {
			factor = 50
			modifier = {
				FROM = { has_country_flag = GER_pay_EA_big }
				factor = 2
			}
			modifier = {
				has_government = FROM
				factor = 2
			}
			modifier = {
				GER = { has_completed_focus = GER_accept_british_naval_dominance }
				factor = 1.5
			}
			modifier = {
				AND = {
					has_government = democratic
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 0.2
			}
			modifier = {
				AND = {
					has_government = fascism
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 2
			}
		}
		set_country_flag = GER_EA_sold
		FROM = {
			set_country_flag = GER_EA_accepted
			hidden_effect = {
				if = {
					limit = {
						FROM = { has_country_flag = GER_pay_EA_big }
					}
					add_to_variable = { var = GER_payment_for_colonies value = 10 }
				}
				else = {
					add_to_variable = { var = GER_payment_for_colonies value = 5 }
				}
			}
			country_event = { id = nonhist_GER.202 days = 4 }
			set_country_flag = country_agreed
		}
	}
	option = { #no
		name = nonhist_GER.201.b	
		ai_chance = {
			factor = 50
			modifier = {
				has_government = FROM
				factor = 0.5
			}
			modifier = {
				is_in_faction_with = FROM
				factor = 0.5
			}
		}	
		FROM = {
			country_event = { id = nonhist_GER.202 days = 4 }
		}
	}
	
}

country_event = { #event for germany if whoever said yes or no
	id = nonhist_GER.202
	title = nonhist_GER.202.t #title is just exchange for colonies
	desc = {
		text = nonhist_GER.202.d.a
		trigger = {
			has_country_flag = country_agreed
		}
	}
	desc = {
		text = nonhist_GER.202.d.b
		trigger = {
			NOT = { has_country_flag = country_agreed }
		}	
	} 
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	fire_only_once = no
	
	option = { #excellent
		name = excellent
		trigger = {
			has_country_flag = country_agreed
		}
		clr_country_flag = country_agreed
	}
	option = { #a shame
		name = nonhist_GER.202.b	
		trigger = {
			NOT = { has_country_flag = country_agreed }
		}	
	}
	
}

country_event = { #event for commonwealth to let them know germany is buying
	id = nonhist_GER.203
	title = nonhist_GER.203.t 
	desc = nonhist_GER.203.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	fire_only_once = no

	option = { #ok
		name = nonhist_GER.203.a		
	}
	
}

country_event = { # exchange for south africa
	id = nonhist_GER.3
	title = nonhist_GER.3.t 
	desc = nonhist_GER.3.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #small payment
		name = nonhist_GER.2.a
		ai_chance = {
			factor = 5
		}
		if = {
			limit = {
				SAF = {
					owns_state = 541
					owns_state = 893
					owns_state = 894
					owns_state = 895
				}
			}
			SAF = {
				country_event = { id = nonhist_GER.301 days = 4 }
			}
		}
		else_if = {
			limit = {
				ENG = {
					OR = {
						owns_state = 541
						owns_state = 893
						owns_state = 894
						owns_state = 895
					}
				}
			}
			ENG = {
				country_event = { id = nonhist_GER.301 days = 4 }
			}
		}		
	}
	option = { #big payment
		name = nonhist_GER.2.b
		ai_chance = {
			factor = 20
		}
		hidden_effect = { set_country_flag = GER_pay_SA_big }
		if = {
			limit = {
				SAF = {
					OR = {
						owns_state = 541
						owns_state = 893
						owns_state = 894
						owns_state = 895
					}
				}
			}
			SAF = {
				country_event = { id = nonhist_GER.301 days = 4 }
			}
		}
		else_if = {
			limit = {
				ENG = {
					OR = {
						owns_state = 541
						owns_state = 893
						owns_state = 894
						owns_state = 895
					}
				}
			}
			ENG = {
				country_event = { id = nonhist_GER.301 days = 4 }
			}
		}		
	}
	option = { #don't want this colony
		name = nonhist_GER.2.c
		ai_chance = {
			factor = 1
		}
	}
}

country_event = { # event for south africa owner (SAF OR ENG)
	id = nonhist_GER.301
	title = nonhist_GER.301.t 
	desc = {
		text = nonhist_GER.301.d.a
		trigger = {
			FROM = { has_country_flag = GER_pay_SA_big }
		}
	}
	desc = {
		text = nonhist_GER.301.d.b
		trigger = {
			NOT = { FROM = { has_country_flag = GER_pay_SA_big } }
		}	
	} 
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #yes
		name = nonhist_GER.201.a	
		ai_chance = {
			factor = 50
			modifier = {
				FROM = { has_country_flag = GER_pay_SA_big }
				factor = 2
			}
			modifier = {
				NOT = { original_tag = SAF }
				factor = 1.5
			}
			modifier = {
				GER = { has_completed_focus = GER_accept_british_naval_dominance }
				factor = 1.5
			}
			modifier = {
				has_government = FROM
				factor = 2
			}
			modifier = {
				AND = {
					has_government = democratic
					NOT = {
						has_completed_focus = SAF_support_the_afrikaner_broederbond
					}
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 0.2
			}
			modifier = {
				AND = {
					OR = {
						has_government = fascism
						has_completed_focus = SAF_support_the_afrikaner_broederbond
					}
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 2
			}
		}
		set_country_flag = GER_SA_sold
		FROM = {
			set_country_flag = GER_SA_accepted
			hidden_effect = {
				if = {
					limit = {
						FROM = { has_country_flag = GER_pay_SA_big }
					}
					add_to_variable = { var = GER_payment_for_colonies value = 10 }
				}
				else = {
					add_to_variable = { var = GER_payment_for_colonies value = 5 }
				}
			}
			country_event = { id = nonhist_GER.202 days = 4 }
			set_country_flag = country_agreed
		}
	}
	option = { #no
		name = nonhist_GER.201.b	
		ai_chance = {
			factor = 50
			modifier = {
				has_government = FROM
				factor = 0.5
			}
			modifier = {
				is_in_faction_with = FROM
				factor = 0.2
			}
		}	
		FROM = {
			country_event = { id = nonhist_GER.202 days = 4 }
		}
	}
}

country_event = { # exchange for papua & bismark
	id = nonhist_GER.4
	title = nonhist_GER.4.t 
	desc = nonhist_GER.4.desc
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #small payment
		name = nonhist_GER.2.a
		ai_chance = {
			factor = 20
		}
		if = {
			limit = {
				AST = {
					OR = {
						owns_state = 523
						owns_state = 737
					}
				}
			}
			AST = {
				country_event = { id = nonhist_GER.401 days = 4 }
			}
		}
		else_if = {
			limit = {
				ENG = {
					OR = {
						owns_state = 523
						owns_state = 737
					}
				}
			}
			ENG = {
				country_event = { id = nonhist_GER.401 days = 4 }
			}
		}		
	}
	option = { #big payment
		name = nonhist_GER.2.b
		ai_chance = {
			factor = 10
		}
		hidden_effect = { set_country_flag = GER_pay_PP_big }
		if = {
			limit = {
				AST = {
					OR = {
						owns_state = 523
						owns_state = 737
					}
				}
			}
			AST = {
				country_event = { id = nonhist_GER.401 days = 4 }
			}
		}
		else_if = {
			limit = {
				ENG = {
					OR = {
						owns_state = 523
						owns_state = 737
					}
				}
			}
			ENG = {
				country_event = { id = nonhist_GER.401 days = 4 }
			}
		}	
	}
	option = { #don't want this colony
		name = nonhist_GER.2.c
		ai_chance = {
			factor = 10
		}
	}
}

country_event = { # event for papua owner (AST OR ENG)
	id = nonhist_GER.401
	title = nonhist_GER.401.t 
	desc = {
		text = nonhist_GER.401.d.a
		trigger = {
			FROM = { has_country_flag = GER_pay_PP_big }
		}
	}
	desc = {
		text = nonhist_GER.401.d.b
		trigger = {
			NOT = { FROM = { has_country_flag = GER_pay_PP_big } }
		}	
	} 
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #yes
		name = nonhist_GER.201.a	
		ai_chance = {
			factor = 50
			modifier = {
				FROM = { has_country_flag = GER_pay_PP_big }
				factor = 2
			}
			modifier = {
				original_tag = AST
				factor = 1.25
			}
			modifier = {
				has_government = FROM
				factor = 2
			}
			modifier = {
				GER = { has_completed_focus = GER_accept_british_naval_dominance }
				factor = 1.5
			}
			modifier = {
				AND = {
					has_government = democratic
					NOT = {
						has_completed_focus = AST_never_another_gallipol
					}
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 0.2
			}
			modifier = {
				AND = {
					OR = {
						has_government = fascism
						has_completed_focus = AST_never_another_gallipol
					}
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 2
			}
		}
		set_country_flag = GER_PP_sold
		FROM = {
			set_country_flag = GER_PP_accepted
			hidden_effect = {
				if = {
					limit = {
						FROM = { has_country_flag = GER_pay_PP_big }
					}
					add_to_variable = { var = GER_payment_for_colonies value = 10 }
				}
				else = {
					add_to_variable = { var = GER_payment_for_colonies value = 5 }
				}
			}
			country_event = { id = nonhist_GER.202 days = 4 }
			set_country_flag = country_agreed
		}
	}
	option = { #no
		name = nonhist_GER.201.b	
		ai_chance = {
			factor = 50
			modifier = {
				has_government = FROM
				factor = 0.5
			}
			modifier = {
				is_in_faction_with = FROM
				factor = 0.2
			}
		}	
		FROM = {
			country_event = { id = nonhist_GER.202 days = 4 }
		}
	}
}

country_event = { # exchange for nz samoa
	id = nonhist_GER.5
	title = nonhist_GER.5.t
	desc = nonhist_GER.5.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #small payment
		name = nonhist_GER.2.a
		ai_chance = {
			factor = 20
		}
		if = {
			limit = {
				NZL = {
					owns_state = 726
				}
			}
			NZL = {
				country_event = { id = nonhist_GER.501 days = 4 }
			}
		}
		else_if = {
			limit = {
				ENG = {
					owns_state = 726
				}
			}
			ENG = {
				country_event = { id = nonhist_GER.501 days = 4 }
			}
		}		
	}
	option = { #big payment
		name = nonhist_GER.2.b
		ai_chance = {
			factor = 5
		}
		hidden_effect = { set_country_flag = GER_pay_SM_big }
		if = {
			limit = {
				NZL = {
					owns_state = 726
				}
			}
			NZL = {
				country_event = { id = nonhist_GER.501 days = 4 }
			}
		}
		else_if = {
			limit = {
				ENG = {
					owns_state = 726
				}
			}
			ENG = {
				country_event = { id = nonhist_GER.501 days = 4 }
			}
		}	
	}
	option = { #don't want this colony
		name = nonhist_GER.2.c
		ai_chance = {
			factor = 20
		}
	}
}

country_event = { # event for samoa owner (NZL OR ENG)
	id = nonhist_GER.501
	title = nonhist_GER.501.t 
	desc = {
		text = nonhist_GER.501.d.a
		trigger = {
			FROM = { has_country_flag = GER_pay_SM_big }
		}
	}
	desc = {
		text = nonhist_GER.501.d.b
		trigger = {
			NOT = { FROM = { has_country_flag = GER_pay_SM_big } }
		}	
	} 
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #yes
		name = nonhist_GER.201.a	
		ai_chance = {
			factor = 50
			modifier = {
				FROM = { has_country_flag = GER_pay_SM_big }
				factor = 2
			}
			modifier = {
				has_government = FROM
				factor = 2
			}
			modifier = {
				GER = { has_completed_focus = GER_accept_british_naval_dominance }
				factor = 1.5
			}
			modifier = {
				AND = {
					has_government = democratic
					NOT = {
						has_completed_focus = NZL_statute_of_westminster
					}
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 0.2
			}
			modifier = {
				AND = {
					OR = {
						has_government = fascism
						has_completed_focus = NZL_statute_of_westminster
					}
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 2
			}
		}
		set_country_flag = GER_SM_sold
		FROM = {
			set_country_flag = GER_SM_accepted
			hidden_effect = {
				if = {
					limit = {
						FROM = { has_country_flag = GER_pay_SM_big }
					}
					add_to_variable = { var = GER_payment_for_colonies value = 10 }
				}
				else = {
					add_to_variable = { var = GER_payment_for_colonies value = 5 }
				}
			}
			country_event = { id = nonhist_GER.202 days = 4 }
			set_country_flag = country_agreed
		}
	}
	option = { #no
		name = nonhist_GER.201.b	
		ai_chance = {
			factor = 50
			modifier = {
				has_government = FROM
				factor = 0.5
			}
			modifier = {
				is_in_faction_with = FROM
				factor = 0.2
			}
		}	
		FROM = {
			country_event = { id = nonhist_GER.202 days = 4 }
		}
	}
}

country_event = { # event for ger - transfer territory, pay up
	id = nonhist_GER.6
	title = nonhist_GER.6.t 
	desc = {
		text = nonhist_GER.6.d.a
		trigger = {
			AND = {
				NOT = { has_country_flag = GER_EA_accepted }
				NOT = { has_country_flag = GER_SA_accepted }
				NOT = { has_country_flag = GER_PP_accepted }
				NOT = { has_country_flag = GER_SM_accepted }
			}
		}
	}
	desc = {
		text = nonhist_GER.6.d.b
		trigger = {
			OR = {
				NOT = { has_country_flag = GER_EA_accepted }
				NOT = { has_country_flag = GER_SA_accepted }
				NOT = { has_country_flag = GER_PP_accepted }
				NOT = { has_country_flag = GER_SM_accepted }
			}
		}	
	} 

	desc = {
		text = nonhist_GER.6.d.c
		trigger = {
			AND = {
				has_country_flag = GER_EA_accepted
				has_country_flag = GER_SA_accepted
				has_country_flag = GER_PP_accepted 
				has_country_flag = GER_SM_accepted
			}
		}	
	} 	

	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			ENG = {
				set_variable = { GER_payment_for_colonies = 0 }
			}
			NZL = {
				set_variable = { GER_payment_for_colonies = 0 }
			}
			AST = {
				set_variable = { GER_payment_for_colonies = 0 }
			}
			SAF = {
				set_variable = { GER_payment_for_colonies = 0 }
			}
		}
	}

	option = { #excellent
		name = excellent
		trigger = {
			has_country_flag = country_agreed
		}
		clr_country_flag = country_agreed
	}
	option = { #a waste
		name = nonhist_GER.6.a	
		trigger = {
			AND = {
				NOT = { has_country_flag = GER_EA_accepted }
				NOT = { has_country_flag = GER_SA_accepted }
				NOT = { has_country_flag = GER_PP_accepted }
				NOT = { has_country_flag = GER_SM_accepted }
			}
		}	
		news_event = { id = nonhist_news.2 hours = 12 }
	}
	
	option = { #ok
		name = nonhist_GER.6.b	
		trigger = {
			OR = {
				has_country_flag = GER_EA_accepted 
				has_country_flag = GER_SA_accepted 
				has_country_flag = GER_PP_accepted 
				has_country_flag = GER_SM_accepted 
			}
		}
		if = {
			limit = {
				has_country_flag = GER_EA_accepted
			}
			if = {
				limit = {
					has_country_flag = GER_pay_EA_big
				}
				random_other_country = {
					limit = {
						has_country_flag = GER_EA_sold
					}
					add_to_variable = {
						var = GER_payment_for_colonies
						value = 10
					}
				} 
			}
			else = {
				random_other_country = {
					limit = {
						has_country_flag = GER_EA_sold
					}
					add_to_variable = {
						var = GER_payment_for_colonies
						value = 5
					}
				} 
			}
			
			GER = { 
				transfer_state = 546 
			}
		}
		if = {
			limit = {
				has_country_flag = GER_SA_accepted
			}
			if = {
				limit = {
					has_country_flag = GER_pay_SA_big
				}
				random_other_country = {
					limit = {
						has_country_flag = GER_SA_sold
					}
					add_to_variable = {
						var = GER_payment_for_colonies
						value = 10
					}
				} 
			}
			else = {
				random_other_country = {
					limit = {
						has_country_flag = GER_EA_sold
					}
					add_to_variable = {
						var = GER_payment_for_colonies
						value = 5
					}
				} 
			}
			GER = { 
				if = {
					limit = {
						895 = {
							OR = {
								is_owned_by = SAF
								is_owned_by = ENG
							}
						}
					}
					transfer_state = 895 
				}
				if = {
					limit = {
						894 = {
							OR = {
								is_owned_by = SAF
								is_owned_by = ENG
							}
						}
					}
					transfer_state = 894 
				}
				if = {
					limit = {
						541 = {
							OR = {
								is_owned_by = SAF
								is_owned_by = ENG
							}
						}
					}
					transfer_state = 541 
				}
				if = {
					limit = {
						893 = {
							OR = {
								is_owned_by = SAF
								is_owned_by = ENG
							}
						}
					}
					transfer_state = 893 
				}
			}
		}
		if = {
			limit = {
				has_country_flag = GER_PP_accepted
			}
			if = {
				limit = {
					has_country_flag = GER_pay_PP_big
				}
				random_other_country = {
					limit = {
						has_country_flag = GER_PP_sold
					}
					add_to_variable = {
						var = GER_payment_for_colonies
						value = 10
					}
				} 
			}
			else = {
				random_other_country = {
					limit = {
						has_country_flag = GER_PP_sold
					}
					add_to_variable = {
						var = GER_payment_for_colonies
						value = 5
					}
				} 
			}
			GER = { 
				if = {
					limit = {
						523 = {
							OR = {
								is_owned_by = AST
								is_owned_by = ENG
							}
						}
					}
					transfer_state = 523 
				}
				if = {
					limit = {
						737 = {
							OR = {
								is_owned_by = AST
								is_owned_by = ENG
							}
						}
					}
					transfer_state = 737 
				}
			}
		}
		if = {
			limit = {
				has_country_flag = GER_SM_accepted
			}
			if = {
				limit = {
					has_country_flag = GER_pay_SM_big
				}
				random_other_country = {
					limit = {
						has_country_flag = GER_SM_sold
					}
					add_to_variable = {
						var = GER_payment_for_colonies
						value = 10
					}
				} 
			}
			else = {
				random_other_country = {
					limit = {
						has_country_flag = GER_SM_sold
					}
					add_to_variable = {
						var = GER_payment_for_colonies
						value = 5
					}
				} 
			}
			GER = { 
				transfer_state = 726 
			}
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 5 }
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_5
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 10 }
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_10
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 15 }
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_15
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 20 }
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_20
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 25 }
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_25
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 30 }
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_30
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 35 }
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_35
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 40 }
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_40
				days = 360
			} 
		}
		every_other_country = {
			limit = {
				OR = {
					has_country_flag = GER_EA_sold
					has_country_flag = GER_SA_sold
					has_country_flag = GER_PP_sold
					has_country_flag = GER_SM_sold
				}
			}
			country_event = nonhist_GER.601
		}
		news_event = { id = nonhist_news.1 hours = 24 }
	}
}

country_event = { # event for whoever saying german payment arrived.
	id = nonhist_GER.601
	title = nonhist_GER.601.t 
	desc = nonhist_GER.601.desc
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes

	fire_only_once = no
	
	option = { #ok
		name = nonhist_GER.601.a	
		custom_effect_tooltip = GER_agreed_states_have_been_transferred_tt
		hidden_effect = {
			if = {
				limit = {
					NOT = { original_tag = ENG }
				}
				multiply_variable = { GER_payment_for_colonies = 2 }
			}
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 5 }
			}
			add_timed_idea = {
				idea = NHMMAP_getting_paid_5
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 10 }
			}
			add_timed_idea = {
				idea = NHMMAP_getting_paid_10
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 15 }
			}
			add_timed_idea = {
				idea = NHMMAP_getting_paid_15
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 20 }
			}
			add_timed_idea = {
				idea = NHMMAP_getting_paid_20
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 25 }
			}
			add_timed_idea = {
				idea = NHMMAP_getting_paid_25
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 30 }
			}
			add_timed_idea = {
				idea = NHMMAP_getting_paid_30
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 35 }
			}
			add_timed_idea = {
				idea = NHMMAP_getting_paid_35
				days = 360
			} 
		}
		if = {
			limit = {
				check_variable = { GER_payment_for_colonies = 40 }
			}
			add_timed_idea = {
				idea = NHMMAP_getting_paid_40
				days = 360
			} 
		}
	}
}

country_event = { # germany wants to join allies
	id = nonhist_GER.7
	title = generic.2.t
	desc = generic.2.d.e
	picture = GFX_report_event_generic_read_write

	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_inviter
			FROM = {
				save_event_target_as = alliance_applicant
			}
		}
	}

	is_triggered_only = yes
	
	option = { #Agree / Both different
		name = generic.2.e
		ai_chance = {
			base = 100
			
			modifier = {
				factor = 0.5
				has_war = no
				FROM = {
					has_war = yes
				}
			}
			
			modifier = {
				factor = 0.5
				NOT = {
					has_government = neutrality
				}
			}
			
			modifier = {
				factor = 0.75
				FROM = {
					is_major = no
				}
			}

			modifier = {
				factor = 0.1
				FROM = {
					has_completed_focus = GER_reinstate_nazi_leadership
				}
				has_government = democratic
			}
		}
		add_to_faction = FROM
		FROM = { country_event = { id = generic.3 hours = 6 } }
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		FROM = {
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
		}
	}
	
	option = { #Reject
		name = generic.2.f
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 65
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 35
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 5
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 35
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 65
				}
			}
			
			modifier = {
				factor = 0.1
				has_war = yes
				FROM = {
					has_war = no
				}
			}
			modifier = {
				factor = 10
				FROM = {
					has_completed_focus = GER_reinstate_nazi_leadership
				}
				has_government = democratic
			}
			
			modifier = {
				factor = 0.1
				FROM = {
					is_major = yes
				}
			}

			modifier = {
				factor = 10
				FROM = {
					OR = {
						is_subject = yes
						is_in_faction = yes
					}
				}
			}
		}
		FROM = { 
			country_event = { id = generic.4 hours = 6 }
		}
	}
}

country_event = {
	id = nonhist_GER.8
	title = nonhist_GER.8.t
	desc = nonhist_GER.8.desc
	picture = GFX_report_event_royal_parade

	is_triggered_only = yes

	# Accept
	option = {
		name = nonhist_GER.8.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				has_completed_focus = ENG_a_change_in_course
			}
		}
		add_timed_idea = { idea = GER_preparing_ITA_coup days = 365 }
			unlock_decision_category_tooltip = GER_ENG_support_royal_claim
			hidden_effect = {
				set_country_flag = ENG_will_restore_monarchy
			}
		FROM = { 
			country_event = { id = nonhist_GER.801 hours = 6 }
		}
	}

	# Decline
	option = {
		name = nonhist_GER.8.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				has_completed_focus = ENG_home_defence
			}
		}
		FROM = { 
			country_event = { id = nonhist_GER.802 hours = 6 }
		}
	}
}

country_event = {
	id = nonhist_GER.801
	title = nonhist_GER.801.t
	desc = nonhist_GER.801.desc
	picture = GFX_report_event_royal_parade

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { 
		name = excellent
	}
}

country_event = {
	id = nonhist_GER.802
	title = nonhist_GER.802.t
	desc = nonhist_GER.802.desc
	picture = GFX_report_event_royal_parade

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { 
		name = wtt_germany.10.a
	}
}

country_event = {
	id = nonhist_GER.9
	title = nonhist_GER.9.t
	desc = nonhist_GER.9.desc
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #small payment
		ai_chance = {
			factor = 20
		}
		name = nonhist_GER.2.a
		hidden_effect = { set_country_flag = GER_pay_JP_small }
		647 = {
			CONTROLLER = { #JAP or MAN
				country_event = { id = nonhist_GER.10 days = 12 }
			}
		}
	}
	option = { #big payment
		name = nonhist_GER.2.b
		ai_chance = {
			factor = 10
		}
		hidden_effect = { set_country_flag = GER_pay_JP_big }
		647 = {
			CONTROLLER = { #JAP or MAN
				country_event = { id = nonhist_GER.10 days = 12 }
			}
		}
	}
	option = { #don't offer anything, just demand them back
		name = nonhist_GER.9.c
		ai_chance = {
			factor = 10
		}
		647 = {
			CONTROLLER = { #JAP or MAN
				country_event = { id = nonhist_GER.10 days = 12 }
			}
		}
	}
}

country_event = { # event for palau owner (has to be either JAP or MAN for focus to work)
	id = nonhist_GER.10
	title = nonhist_GER.10.t 
	desc = {
		text = nonhist_GER.10.d.a
		trigger = {
			FROM = {
				has_country_flag = GER_pay_JP_big
			}
		}
	}
	desc = {
		text = nonhist_GER.10.d.b
		trigger = {
			FROM = {
				has_country_flag = GER_pay_JP_small
			}
		}
	}
	desc = {
		text = nonhist_GER.10.d.c
		trigger = {
			FROM = {
				NOT = { has_country_flag = GER_pay_JP_big }
				NOT = { has_country_flag = GER_pay_JP_small }
			}
		}	
	} 
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes

	fire_only_once = yes
	
	option = { #yes
		name = nonhist_GER.201.a	
		ai_chance = {
			factor = 10
			modifier = {
				FROM = { has_country_flag = GER_pay_JP_big }
				factor = 5
			}
			modifier = {
				FROM = { has_country_flag = GER_pay_JP_small }
				factor = 2
			}
			modifier = {
				has_government = FROM
				factor = 1.5
			}
			modifier = {
				has_completed_focus = JAP_strike_south_doctrine
				factor = 0
			}
			modifier = {
				AND = {
					has_government = democratic
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 0.1
			}
			modifier = {
				AND = {
					OR = {
						has_government = fascism
						has_completed_focus = NZL_statute_of_westminster
					}
					FROM = { has_completed_focus = GER_reinstate_nazi_leadership }
				}
				factor = 1.5
			}
			modifier = {
				AND = {
					has_war_with = CHI
					FROM = { has_completed_focus = GER_our_place_in_the_sun }
				}
				factor = 0.8
			}
			modifier = {
				original_tag = MAN
				factor = 5
			}
		}
		FROM = {
			country_event = { id = nonhist_GER.11 days = 12 }
		}
	}
	option = { #no
		name = nonhist_GER.201.b	
		ai_chance = {
			factor = 50
			modifier = {
				is_in_faction_with = FROM
				factor = 0.2
			}
		}	
		FROM = {
			country_event = { id = nonhist_GER.13 days = 10 }
		}
	}
}

country_event = { # event for germany japan accepted!
	id = nonhist_GER.11
	title = nonhist_POL.2.t
	desc = nonhist_GER.11.desc
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes

	fire_only_once = yes
	
	option = { #yes
		name = excellent	
		FROM = {
			country_event = nonhist_GER.12
		}
		if = {
			limit = {
				any_country = {
					has_cosmetic_tag = EAS_GER_Empire
				}
			}
			random_other_country = {
				limit = {
					has_cosmetic_tag = EAS_GER_Empire
				}
				transfer_state = 684 
				transfer_state = 633 
				transfer_state = 646 
				transfer_state = 647 
			}
		}
		else = {
			ROOT = {
				transfer_state = 684 
				transfer_state = 633 
				transfer_state = 646 
				transfer_state = 647 
			}
		}
		if = {
			limit = {
				has_country_flag = GER_pay_JP_small
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_5
				days = 180
			} 
		}
		if = {
			limit = {
				has_country_flag = GER_pay_JP_big
			}
			add_timed_idea = {
				idea = NHMMAP_repaying_debts_10
				days = 180
			} 
		}
	}
}

country_event = { # event for jap/man saying german payment arrived.
	id = nonhist_GER.12
	title = nonhist_GER.601.t
	desc = nonhist_GER.601.desc
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes

	fire_only_once = no
	
	option = { #ok
		name = nonhist_GER.12.a	
		custom_effect_tooltip = GER_agreed_states_have_been_transferred_tt
		if = {
			limit = {
				original_tag = JAP
			}
			if = {
				limit = {
					FROM = { has_country_flag = GER_pay_JP_small }
				}
				add_timed_idea = {
					idea = NHMMAP_getting_paid_5
					days = 180
				} 
			}
			if = {
				limit = {
					FROM = { has_country_flag = GER_pay_JP_big }
				}
				add_timed_idea = {
					idea = NHMMAP_getting_paid_10
					days = 180
				} 
			}
		}
		if = {
			limit = {
				original_tag = MAN
			}
			if = {
				limit = {
					FROM = { has_country_flag = GER_pay_JP_small }
				}
				add_timed_idea = {
					idea = NHMMAP_getting_paid_10
					days = 180
				} 
			}
			if = {
				limit = {
					FROM = { has_country_flag = GER_pay_JP_big }
				}
				add_timed_idea = {
					idea = NHMMAP_getting_paid_20
					days = 180
				} 
			}
		}
	}
}

country_event = { #event for germany, japan refuses
	id = nonhist_GER.13
	title = nonhist_POL.3.t
	desc = nonhist_GER.13.desc
	picture = GFX_report_event_japan_europe_pact

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #fine, whatever
		name = nonhist_GER.13.a
		ai_chance = {
			base = 5
		}
		
	}
	option = { #Fk you buddy im goina embargo your arse!
		name = nonhist_GER.13.b
		send_embargo = FROM
		ai_chance = {
			base = 5
		}
		hidden_effect = {
			add_ai_strategy = { #mainly this is here to counter if japan is kahoda path.
			type = alliance
			id = FROM
			value = -200
			}
		}
		
	}
	option = { #perhaps we should support their enemies in CHINA THEN!!!!!
		name = nonhist_GER.13.c
		trigger = {
			JAP = {
				has_war_with = event_target:WTT_current_china_leader
			}
			has_completed_focus = GER_our_place_in_the_sun
		}
		ai_chance = {
			base = 5
		}
		uncomplete_national_focus = { 
			focus = GER_exchange_for_colonies_JAP
			uncomplete_children = yes
		}
		complete_national_focus = GER_china_ally
	}
}

country_event = { #event for a major that used to be in the axis, when berlin moscow happens
	id = nonhist_GER.14
	title = nonhist_GER.14.t
	desc = nonhist_GER.14.desc
	picture = GFX_report_event_gre_cabinet_meeting

	is_triggered_only = yes

	fire_only_once = yes
	
	option = { #maybe we should throw in with the allies!
		name = nonhist_GER.14.a
		ai_chance = {
			base = 10
		}
		trigger = {
			any_other_country = {
				is_faction_leader = yes
				has_government = democratic
				capital_scope = {
					OR = {
						is_on_continent = europe
						is_on_continent = north_america
					}
				}
			}
		}
		if = {
			limit = {
				ENG = {
					is_faction_leader = yes
					has_government = democratic
				}
			}
			country_event = { id = nonhist_GER.15 days = 4 }
		}
		else = {
			random_other_country = {
				limit = {
					is_faction_leader = yes
					has_government = democratic
					capital_scope = {
						OR = {
							is_on_continent = europe
							is_on_continent = north_america
						}
					}
				}
				country_event = { id = nonhist_GER.15 days = 4 }
			}
		}
	}

	option = { #let's make our own axis! invite all the old axis members who think communism is the enemy!
		name = nonhist_GER.14.b
		ai_chance = {
			base = 10
		}
		trigger = {
			any_other_country = {
				NOT = {
					original_tag = ROOT
				}
				has_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
			}
		}
		set_rule = { can_join_factions = yes }
		create_faction = NHMMAP_axis_alternate_faction
		every_country = {
			limit = {
				has_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
			}
			country_event = { id = nonhist_GER.18 days = 1 random_days = 3 }
		}
	}

	option = { #we have no choice, stay in the axis
		name = nonhist_GER.14.c
		ai_chance = {
			base = 1
		}
		hidden_effect = {
			add_ai_strategy = {
				type = alliance
				id = GER
				value = 200 #it will be still at -300 from -500
			}
			every_country = {
				limit = {
					has_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
				}
				hidden_effect = {
					clr_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
					set_rule = { can_join_factions = yes }
				}
			}
		}
	}
}

country_event = { #event for a major democratic country that a ex-axis major wants to join the allies
	id = nonhist_GER.15
	title = nonhist_GER.15.t
	desc = nonhist_GER.15.desc #we cant afford to refuse entirely too, so no deny option
	picture = GFX_report_event_gre_cabinet_meeting

	is_triggered_only = yes

	fire_only_once = yes
	
	option = { #sure! bring all your friends!
		name = nonhist_GER.15.a
		ai_chance = {
			base = 5
		}
		add_popularity = { ideology = fascism popularity = 0.075 }
		effect_tooltip = {
			every_country = {
				limit = {
					has_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
				}
				every_enemy_country = {
					white_peace = PREV
				}
				ROOT = {
					add_to_faction = PREV
				}
				add_popularity = { ideology = fascism popularity = -0.1 }
				add_popularity = { ideology = democratic popularity = 0.1 }
			}
		}
		hidden_effect = {
			every_country = {
				limit = {
					has_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
				}
				country_event = nonhist_GER.16
			}
		}
	}

	option = { #they will become our democratic puppet first
		name = nonhist_GER.15.b
		ai_chance = {
			base = 5
		}
		trigger = {
			ROOT = {
				ic_ratio = { #bigger industry
					tag = FROM
					ratio > 1
				}
			}
		}
		FROM = {
			country_event = nonhist_GER.17
		}
		effect_tooltip = {
			puppet = FROM
		}
		custom_effect_tooltip = NHMMAP_scares_off_other_axis_members_tt
	}
}

country_event = { #event for ex-axis members to inform them they are in the allies now, no you cannot refuse.
	id = nonhist_GER.16
	title = nonhist_GER.16.t
	desc = nonhist_GER.16.desc #we cant afford to refuse
	picture = GFX_report_event_gre_cabinet_meeting

	is_triggered_only = yes

	fire_only_once = no

	immediate = {
		hidden_effect = {
			clr_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
			set_rule = { can_join_factions = yes }
			every_enemy_country = {
				white_peace = ROOT
			}
			FROM = {
				add_to_faction = ROOT
			}
			add_popularity = { ideology = fascism popularity = -0.1 }
			add_popularity = { ideology = democratic popularity = 0.1 }
		}
		
	}
	
	option = { #well I guess we like the allies now
		name = nonhist_GER.16.a
		ai_chance = {
			base = 10
		}
		effect_tooltip = {
			every_enemy_country = {
				white_peace = ROOT
			}
			FROM = {
				add_to_faction = ROOT
			}
			add_popularity = { ideology = fascism popularity = -0.1 }
			add_popularity = { ideology = democratic popularity = 0.1 }
		}
	}
}

country_event = { #event for ex axis major that they are going to be puppeted
	id = nonhist_GER.17
	title = nonhist_GER.17.t
	desc = nonhist_GER.17.desc #we cant afford to refuse 
	picture = GFX_report_event_gre_cabinet_meeting

	is_triggered_only = yes

	fire_only_once = yes
	
	option = { #we have no choice...
		name = nonhist_GER.17.a
		ai_chance = {
			base = 10
		}
		every_enemy_country = {
			white_peace = ROOT
		}
		FROM = {
			puppet = ROOT
		}
		hidden_effect = {
			every_country = {
				limit = {
					has_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
				}
				hidden_effect = {
					clr_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
					set_rule = { can_join_factions = yes }
				}
			}
		}
	}
}

country_event = { #event for ex-axis members to inform them they are in the new axis now, they cannot refuse
	id = nonhist_GER.18
	title = nonhist_GER.18.t
	desc = nonhist_GER.18.desc #we cant afford to refuse
	picture = GFX_report_event_gre_cabinet_meeting

	is_triggered_only = yes

	fire_only_once = no
	
	option = { #well I guess this is what we are doing now.
		name = nonhist_GER.18.a
		ai_chance = {
			base = 10
		}
		hidden_effect = {
			clr_country_flag = NHMMAP_left_the_axis_after_berlin_moscow
			set_rule = { can_join_factions = yes }
		}
		FROM = {
			add_to_faction = ROOT
		}
	}
}

################################################################################
################################################################################
################################# TURKEY ######################################
################################################################################
################################################################################


country_event = { #event for saadabad members, turkey wants us to join their faction
	id = nonhist_TUR.1
	title = generic.5.t
	desc = generic.5.d.e
	picture = GFX_report_event_tur_the_saadabad_pact

	is_triggered_only = yes

	fire_only_once = yes
	
	
	option = { #yes
		name = generic.5.e
		ai_chance = {
			base = 5
		}
		trigger = {
			has_rule = can_join_factions
			FROM = { has_rule = can_join_factions }
			is_in_faction = no
		}
		random_other_country = {
			limit = {
				is_in_faction_with = FROM
				is_faction_leader = yes
			}
			add_to_faction = ROOT
			ROOT = {
				add_ai_strategy = {
					type = alliance
					id = PREV
					value = 100
				}
			}
		}
		FROM = { 
			country_event = { id = generic.6 hours = 6 }
		}
		hidden_effect = {
			ROOT = { set_country_flag = alliance_applicant@ROOT }
			FROM = { set_country_flag = alliance_inviter@ROOT }
			news_event = { id = news.289.t hours = 12 }
		}
		
	}
	option = { #no
		name = generic.2.f
		send_embargo = FROM
		ai_chance = {
			base = 5
			modifier = {
				factor = 2
				original_tag = PER
			}
		}
		FROM = { 
			country_event = { id = generic.7 hours = 6 }
		}
	}
}

country_event = { #event for ENG saying TUR wants to join faction, somehow the allies doesn't exist.
	id = nonhist_TUR.2
	title = nonhist_TUR.2.t
	desc = generic.2.d.e
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	fire_only_once = yes

	option = { #yes
		name = generic.5.a
		ai_chance = {
			base = 5
		}
		create_faction = TUR_ankara_treaty 
		add_to_faction = FROM
		FROM = {
			country_event = { id = generic.3 hours = 6 } 
		}
		hidden_effect = {
			add_ai_strategy = {
				type = alliance
				id = FROM
				value = 200
			}
			FROM = {
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
			}
		}
	}
	option = { #no
		name = generic.2.f
		ai_chance = {
			base = 1
		}
		FROM = {
			country_event = { id = generic.4 hours = 6 } 
			uncomplete_national_focus = {
				focus = TUR_join_the_allies
				uncomplete_children = yes
			}
		}
	}
}

country_event = { #event for a fascist mediterranean country saying turkey wants to make a faction with them
	id = nonhist_TUR.3
	title = nonhist_TUR.2.t
	desc = generic.2.d.b
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	fire_only_once = yes

	option = { #yes
		name = generic.5.a
		ai_chance = {
			base = 5
		}
		if = {
			limit = {
				is_major = yes
			}
			create_faction = TUR_covenant_of_the_mediterranean 
			add_to_faction = FROM
		}
		else = {
			FROM = {
				create_faction = TUR_covenant_of_the_mediterranean 
				add_to_faction = ROOT
			}
		}
		FROM = {
			country_event = { id = generic.3 hours = 6 } 
		}
		hidden_effect = {
			add_ai_strategy = {
				type = alliance
				id = FROM
				value = 200
			}
			FROM = {
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
			}
		}
	}
	option = { #no
		name = generic.2.f
		ai_chance = {
			base = 1
		}
		FROM = {
			country_event = { id = generic.4 hours = 6 } 
			uncomplete_national_focus = {
				focus = TUR_the_mediterranean_entente
				uncomplete_children = yes
			}
		}
	}
}

country_event = { #fascist med ally gets an event with offer to carve up greece, NOT ITALY, ITALY has event bftb_turkey.66
	id = nonhist_TUR.4
	title = bftb_turkey.66.t
	desc = nonhist_TUR.4.desc
	picture = GFX_report_event_tur_kemalist_officers

	is_triggered_only = yes
	
	option = {
		name = bftb_turkey.66.a #this will make the invasion go swimingly
		if = {
			limit = {
				original_tag = FRA
			}
			ROOT = { 
				add_state_claim = 182
				add_state_claim = 186
			}
			hidden_effect = {
				182 = { set_state_flag = TUR_ally_greece_state_flag }
				186 = { set_state_flag = TUR_ally_greece_state_flag }
				185 = { set_state_flag = TUR_turkey_greece_state_flag }
				47 = { set_state_flag = TUR_turkey_greece_state_flag }
				731 = { set_state_flag = TUR_turkey_greece_state_flag }
				184 = { set_state_flag = TUR_turkey_greece_state_flag }
				187 = { set_state_flag = TUR_turkey_greece_state_flag }
				TUR = { country_event = { id = bftb_turkey.131 hours = 8 } }
			}
		} 
		if = {
			limit = {
				original_tag = YUG
				owns_state = 106
			}
			ROOT = { 
				add_state_claim = 731
			}
			hidden_effect = {
				182 = { set_state_flag = TUR_turkey_greece_state_flag }
				186 = { set_state_flag = TUR_turkey_greece_puppet_state_flag }
				185 = { set_state_flag = TUR_turkey_greece_puppet_state_flag }
				47 = { set_state_flag = TUR_turkey_greece_puppet_state_flag }
				731 = { set_state_flag = TUR_ally_greece_state_flag }
				184 = { set_state_flag = TUR_turkey_greece_state_flag }
				187 = { set_state_flag = TUR_turkey_greece_state_flag }
				TUR = { country_event = { id = bftb_turkey.131 hours = 8 } }
			}
		} 
		else = {
			ROOT = { 
				add_state_claim = 182
			}
			hidden_effect = {
				182 = { set_state_flag = TUR_ally_greece_state_flag }
				186 = { set_state_flag = TUR_turkey_greece_state_flag }
				185 = { set_state_flag = TUR_turkey_greece_state_flag }
				47 = { set_state_flag = TUR_turkey_greece_state_flag }
				731 = { set_state_flag = TUR_turkey_greece_state_flag }
				184 = { set_state_flag = TUR_turkey_greece_state_flag }
				187 = { set_state_flag = TUR_turkey_greece_state_flag }
				TUR = { country_event = { id = bftb_turkey.131 hours = 8 } }
			}
		} 
		
	}
	option = {
		name = bftb_turkey.66.b #this will make the invasion go swimingly 
		TUR = { country_event = { id = bftb_turkey.132 hours = 8 } }
	}
}

country_event = { #event for a communist mediterranean country saying turkey wants to make a faction with them
	id = nonhist_TUR.5
	title = nonhist_TUR.2.t
	desc = generic.2.d.c
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	fire_only_once = yes

	option = { #yes
		name = generic.5.a
		ai_chance = {
			base = 5
		}
		if = {
			limit = {
				is_major = yes
			}
			create_faction = TUR_anti_bolshevik_accord 
			add_to_faction = FROM
		}
		else = {
			FROM = {
				create_faction = TUR_anti_bolshevik_accord 
				add_to_faction = ROOT
			}
		}
		FROM = {
			country_event = { id = generic.3 hours = 6 } 
		}
		hidden_effect = {
			add_ai_strategy = {
				type = alliance
				id = FROM
				value = 200
			}
			FROM = {
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
			}
		}
	}
	option = { #no
		name = generic.2.f
		ai_chance = {
			base = 1
		}
		FROM = {
			country_event = { id = generic.4 hours = 6 } 
			uncomplete_national_focus = {
				focus = TUR_anti_bolshevik_mediterranean_bloc
				uncomplete_children = yes
			}
		}
	}
}

################################################################################
################################################################################
################################# NORWAY ######################################
################################################################################
################################################################################

country_event = { # Quisling's Historical Coup event 
	id = nonhist_NOR.1
	title = AAT_norway.13.t
	desc = nonhist_NOR.1.desc	
	picture = GFX_report_event_NOR_quisling_speech

	is_triggered_only = yes

	fire_only_once = yes

	option = { # Stay democratic
		name = nonhist_NOR.1.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 0 
				OR = {
					has_country_flag = NOR_AI_RANDOM_HISTORICAL_FASCIST_Q
					has_game_rule = {
						rule = NOR_AI_BEHAVIOR
						option = HISTORICAL_FASCIST_Q
					}
					has_country_flag = NOR_AI_RANDOM_HISTORICAL_FASCIST_RK
					has_game_rule = {
						rule = NOR_AI_BEHAVIOR
						option = HISTORICAL_FASCIST_RK
					}
				}
			}
		}
		trigger = {
		}
		hidden_effect = {
			set_country_flag = NOR_refused_to_switch_to_fasc_NHMMAP 
		}
		
		custom_effect_tooltip = NOR_stay_democratic_NHMMAP_TT
		
	}
	
	option = { # Leave Quisling to take over
		name = nonhist_NOR.1.b
		ai_chance = {
			base = 10
			modifier = {
				factor = 0 
				OR = {
					AND = {
						is_historical_focus_on = yes 
						has_game_rule = {
							rule = NOR_AI_BEHAVIOR
							option = DEFAULT
						}
					}
					has_country_flag = NOR_AI_RANDOM_HISTORICAL
					has_game_rule = {
						rule = NOR_AI_BEHAVIOR
						option = HISTORICAL
					}
				}
			}
		}
		trigger = {
		}
		hidden_effect = {
			set_country_flag = NOR_switched_to_fasc_hist 
		}
		custom_effect_tooltip = NOR_switch_to_fascist_NHMMAP_TT # Warning about that Oslo City Shuffle
		
	}

}


################################################################################
################################################################################
################################# AUSTRIA ######################################
################################################################################
################################################################################

country_event = { # Event for major fascists who are guaranteeing austria that the anchluss is about to happen, and maybe they should retract guarantees before it leads to war. (the austrians voted yes to anchluss after all!!! :) )
	id = nonhist_AUS.1
	title = nonhist_AUS.1.t
	desc = nonhist_AUS.1.desc	
	picture = GFX_report_event_fascist_gathering

	is_triggered_only = yes

	fire_only_once = no

	option = { # nope
		name = nonhist_AUS.1.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				OR = {
					AND = { #Italy intends to join the Axis
						original_tag = ITA
						OR = {
							ITA_is_historical_ai = yes
							ITA_is_historical_alternate_ai = yes
						}
					}
					AND = { #France intends to join the Axis
						original_tag = FRA
						OR = {
							has_country_flag = FRA_AI_FASCIST
							has_game_rule = {
								rule = FRA_ai_behavior
								option = FASCIST
							}
						}
					}
					#the UK and USA don't have fascist-axis paths.
				}
			}
		}

		add_war_support = 0.025
		add_stability = -0.01
		
	}
	
	option = { # retract our austrian guarantees after all
		name = nonhist_AUS.1.b
		ai_chance = {
			base = 1
		}
		diplomatic_relation = { 
			country = AUS 
			relation = guarantee
			active = no
		}
		add_ai_strategy = {
			type = protect
			id = AUS
			value = -200
		}
		add_stability = 0.01
		add_war_support = -0.025
	}
}

################################################################################
################################################################################
################################# GENERIC ######################################
################################################################################
################################################################################

country_event = { #generic event for merging two factions together
	id = nonhist_generic.1
	title = nonhist_generic.1.t
	desc = { # FROM and ROOT are Democratic
		text = nonhist_generic.1.d.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	desc = { # FROM and ROOT are Fascist
		text = nonhist_generic.1.d.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
	}
	desc = { # FROM and ROOT are Communist
		text = nonhist_generic.1.d.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	desc = { # FROM and ROOT are different ideologies
		text = nonhist_generic.1.d.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
	}
	picture = GFX_report_event_generic_read_write

	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_inviter
			FROM = {
				save_event_target_as = alliance_applicant
			}
		}
	}

	is_triggered_only = yes
	
	option = { #Agree / Both Democratic
		name = nonhist_generic.1.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
		ai_chance = {
			base = 100
		}
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		every_other_country = {
			limit = {
				is_in_faction_with = FROM
			}
			leave_faction = yes
			ROOT = {
				add_to_faction = PREV
			}
			country_event = { id = nonhist_generic.2 hours = 6 }
		}
	
	}
	option = { #Agree / Both Fascist
		name = nonhist_generic.1.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
		ai_chance = {
			base = 100

		}
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		every_other_country = {
			limit = {
				is_in_faction_with = FROM
			}
			leave_faction = yes
			ROOT = {
				add_to_faction = PREV
			}
			country_event = { id = nonhist_generic.2 hours = 6 }
		}
		
	}
	option = { #Agree / Both Communist
		name = nonhist_generic.1.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
		ai_chance = {
			base = 100
		}
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		every_other_country = {
			limit = {
				is_in_faction_with = FROM
			}
			leave_faction = yes
			ROOT = {
				add_to_faction = PREV
			}
			country_event = { id = nonhist_generic.2 hours = 6 }
		}
	}
	option = { #Agree / Both different
		name = nonhist_generic.1.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
		ai_chance = {
			base = 100
			
			modifier = {
				factor = 0.5
				has_war = no
				FROM = {
					has_war = yes
				}
			}
			
			modifier = {
				factor = 0.5
				NOT = {
					has_government = neutrality
				}
			}
			
			modifier = {
				factor = 0.75
				FROM = {
					is_major = no
				}
			}
		}
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		every_other_country = {
			limit = {
				is_in_faction_with = FROM
			}
			leave_faction = yes
			ROOT = {
				add_to_faction = PREV
			}
			country_event = { id = nonhist_generic.2 hours = 6 }
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
		}
	}
	
	option = { #Reject
		name = nonhist_generic.1.f
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 65
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 35
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 5
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 35
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 65
				}
			}
			
			modifier = {
				factor = 0.1
				has_war = yes
				FROM = {
					has_war = no
				}
			}
			
			modifier = {
				factor = 0.1
				FROM = {
					is_major = yes
				}
			}

			modifier = {
				factor = 10
				FROM = {
					is_subject = yes
				}
			}
		}
		FROM = { 
			country_event = { id = generic.4 hours = 6 }
		}
	}
}

country_event = {
	id = nonhist_generic.2
	title = nonhist_generic.2.t
	desc = nonhist_generic.2.d

	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	option = {
		name = nonhist_generic.2.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	option = {
		name = nonhist_generic.2.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}


	}
	option = {
		name = nonhist_generic.2.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	option = {
		name = nonhist_generic.2.e
		trigger = {
			NOT = {
				AND = {
					FROM = {
						has_government = democratic
					}
					has_government = democratic
				}
				AND = {
					FROM = {
						has_government = fascism
					}
					has_government = fascism
				}
				AND = {
					FROM = {
						has_government = communism
					}
					has_government = communism
				}
			}
		}
	}
}


country_event = { #triggered event for merging two same-ideology factions together when both factions are neighbors and both in a defensive war against the same power, and higher than 0% capitulation.
	id = nonhist_generic.3
	title = nonhist_generic.1.t
	desc = { # FROM and ROOT are Democratic
		text = nonhist_generic.3.d.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
	}
	desc = { # FROM and ROOT are Fascist
		text = nonhist_generic.3.d.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
	}
	desc = { # FROM and ROOT are Communist
		text = nonhist_generic.3.d.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
	}
	picture = GFX_report_event_generic_read_write

	immediate = {
		hidden_effect = {
			save_event_target_as = alliance_inviter
			FROM = {
				save_event_target_as = alliance_applicant
			}
		}
	}

	is_triggered_only = yes
	
	option = { #Agree / Both Democratic
		name = nonhist_generic.1.a
		trigger = {
			AND = {
				FROM = {
					has_government = democratic
				}
				has_government = democratic
			}
		}
		ai_chance = {
			base = 100
		}
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		every_other_country = {
			limit = {
				is_in_faction_with = FROM
			}
			leave_faction = yes
			ROOT = {
				add_to_faction = PREV
			}
			country_event = { id = nonhist_generic.2 hours = 6 }
		}
	
	}
	option = { #Agree / Both Fascist
		name = nonhist_generic.1.b
		trigger = {
			AND = {
				FROM = {
					has_government = fascism
				}
				has_government = fascism
			}
		}
		ai_chance = {
			base = 100

		}
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		every_other_country = {
			limit = {
				is_in_faction_with = FROM
			}
			leave_faction = yes
			ROOT = {
				add_to_faction = PREV
			}
			country_event = { id = nonhist_generic.2 hours = 6 }
		}
		
	}
	option = { #Agree / Both Communist
		name = nonhist_generic.1.c
		trigger = {
			AND = {
				FROM = {
					has_government = communism
				}
				has_government = communism
			}
		}
		ai_chance = {
			base = 100
		}
		hidden_effect = {
			set_country_flag = alliance_inviter@ROOT
			FROM = { set_country_flag = alliance_applicant@ROOT }
			news_event = { id = news.289 hours = 12 }
		}
		every_other_country = {
			limit = {
				is_in_faction_with = FROM
			}
			leave_faction = yes
			ROOT = {
				add_to_faction = PREV
			}
			country_event = { id = nonhist_generic.2 hours = 6 }
		}
	}
	
	option = { #Reject
		name = nonhist_generic.1.f
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 65
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 35
				}
			}
			
			modifier = {
				factor = 0.5
				has_opinion = {
					target = FROM
					value > 5
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 35
				}
			}
			
			modifier = {
				factor = 2.0
				has_opinion = {
					target = FROM
					value < 65
				}
			}
			
			modifier = {
				factor = 0.1
				has_war = yes
				FROM = {
					has_war = no
				}
			}

			modifier = {
				factor = 10
				FROM = {
					is_subject = yes
				}
			}
		}
		FROM = { 
			country_event = { id = generic.4 hours = 6 }
		}
	}
}

country_event = {
	id = nonhist_generic.4
	title = nonhist_generic.4.t
	desc = nonhist_generic.4.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	option = {
		name = nonhist_generic.4.a

		var:global.major_alliance_merger = {
			country_event = { id = nonhist_generic.3 days = 14 random_days = 6 }
		}
		ai_chance = {
			factor = 1
		}

	}
	option = {
		name = nonhist_generic.4.b
		#no

		ai_chance = {
			factor = 0
		}
	}
}

######################################################
#########################################################
####################### NEWS ###############################

news_event = {
	id = nonhist_news.1
	title = nonhist_news.1.t
	desc = nonhist_news.1.desc
	picture = GFX_news_event_017
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = nonhist_news.1.a
		trigger = {
			original_tag = GER
		}
	}
	option = {
		name = nonhist_news.1.b
		trigger = {
			OR = {
				original_tag = ENG
				is_in_faction_with = ENG
				is_subject_of = ENG
			}
		}
	}
	option = {
		name = nonhist_news.1.c
		trigger = {
			NOT = {
				OR = {
					original_tag = ENG
					is_in_faction_with = ENG
					is_subject_of = ENG
					original_tag = GER
				}
			}
		}
	}
}

news_event = {
	id = nonhist_news.2
	title = nonhist_news.2.t
	desc = nonhist_news.2.desc
	picture = GFX_news_event_destroyers
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = nonhist_news.2.a
		trigger = {
			original_tag = GER
		}
	}
	option = {
		name = nonhist_news.2.b
		trigger = {
			OR = {
				original_tag = ENG
				is_in_faction_with = ENG
				is_subject_of = ENG
			}
		}
	}
	option = {
		name = nonhist_news.1.c
		trigger = {
			NOT = {
				OR = {
					original_tag = ENG
					is_in_faction_with = ENG
					is_subject_of = ENG
					original_tag = GER
				}
			}
		}
	}
}

news_event = {
	id = nonhist_news.3
	title = nonhist_news.3.t
	desc = nonhist_news.3.desc
	picture = GFX_news_event_japanese_parade
	
	major = yes
	
	is_triggered_only = yes
	
	option = {
		name = nonhist_news.3.a
		trigger = {
			original_tag = JAP
		}
	}
	option = {
		name = nonhist_news.3.b #embarrasing defeat
		trigger = {
			JAP = { has_country_flag = JAP_SOV_promise_large_gains }
			OR = {
				original_tag = SOV
				is_in_faction_with = SOV
				is_subject_of = SOV
			}
		}
	}
	option = {
		name = nonhist_news.3.c
		trigger = {
			JAP = { 
				OR = {
					has_country_flag = JAP_SOV_promise_small_gains
					has_country_flag = JAP_SOV_promise_mid_gains
				}
			}
			OR = {
				original_tag = SOV
				is_in_faction_with = SOV
				is_subject_of = SOV
			}
		}
	}
	option = {
		name = nonhist_news.3.e #wow big suprise that japan won that hard!
		trigger = {
			JAP = { has_country_flag = JAP_SOV_promise_large_gains }
			NOT = {
				OR = {
					original_tag = SOV
					is_in_faction_with = SOV
					is_subject_of = SOV
					original_tag = JAP
				}
			}
		}
	}
	option = {
		name = nonhist_news.3.f
		trigger = {
			JAP = { 
				OR = {
					has_country_flag = JAP_SOV_promise_small_gains
					has_country_flag = JAP_SOV_promise_mid_gains
				}
			}
			NOT = {
				OR = {
					original_tag = SOV
					is_in_faction_with = SOV
					is_subject_of = SOV
					original_tag = JAP
				}
			}
		}
	}
}